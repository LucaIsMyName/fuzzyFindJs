{"version":3,"file":"config.cjs","sources":["../../../src/core/config.ts"],"sourcesContent":["import type {\n  //\n  FuzzyConfig,\n  FuzzyFeature,\n} from \"./types.js\";\n\n/**\n * Default configuration for FuzzyFindJS\n * Provides sensible defaults that work out of the box\n */\nexport const DEFAULT_CONFIG: FuzzyConfig = {\n  languages: [\"english\"],\n  features: [\"phonetic\", \"compound\", \"synonyms\", \"keyboard-neighbors\", \"partial-words\", \"missing-letters\", \"extra-letters\", \"transpositions\"],\n  performance: \"balanced\",\n  maxResults: 10,\n  minQueryLength: 2,\n  fuzzyThreshold: 0.75,\n  maxEditDistance: 2,\n  ngramSize: 3,\n  enableAlphanumericSegmentation: true, // Enabled by default - opt-out for performance if needed\n  alphanumericAlphaWeight: 0.7,\n  alphanumericNumericWeight: 0.3,\n  alphanumericNumericEditDistanceMultiplier: 1.5,\n};\n\n/**\n * Performance-optimized configurations\n */\nexport const PERFORMANCE_CONFIGS: Record<string, Partial<FuzzyConfig>> = {\n  fast: {\n    performance: \"fast\",\n    features: [\"partial-words\", \"missing-letters\"],\n    maxEditDistance: 1,\n    fuzzyThreshold: 0.9,\n    maxResults: 3,\n    enableAlphanumericSegmentation: true, // Enabled in fast mode\n  },\n  balanced: {\n    performance: \"balanced\",\n    features: [\"phonetic\", \"partial-words\", \"missing-letters\", \"keyboard-neighbors\"],\n    maxEditDistance: 2,\n    fuzzyThreshold: 0.75,\n    maxResults: 5,\n    enableAlphanumericSegmentation: true, // Enabled in balanced mode\n  },\n  comprehensive: {\n    performance: \"comprehensive\",\n    features: [\"phonetic\", \"compound\", \"synonyms\", \"keyboard-neighbors\", \"partial-words\", \"missing-letters\", \"extra-letters\", \"transpositions\"],\n    maxEditDistance: 3,\n    fuzzyThreshold: 0.7,\n    maxResults: 10,\n    enableAlphanumericSegmentation: true, // Enabled in comprehensive mode\n  },\n};\n\n/**\n * Language-specific feature recommendations\n */\nexport const LANGUAGE_FEATURES: Record<string, FuzzyFeature[]> = {\n  german: [\n    //\n    \"phonetic\",\n    \"compound\",\n    \"synonyms\",\n    \"keyboard-neighbors\",\n    \"partial-words\",\n    \"missing-letters\",\n    \"extra-letters\",\n  ],\n  english: [\n    //\n    \"phonetic\",\n    \"synonyms\",\n    \"keyboard-neighbors\",\n    \"partial-words\",\n    \"missing-letters\",\n    \"transpositions\",\n  ],\n  spanish: [\n    //\n    \"phonetic\",\n    \"synonyms\",\n    \"keyboard-neighbors\",\n    \"partial-words\",\n    \"missing-letters\",\n  ],\n  french: [\n    //\n    \"phonetic\",\n    \"synonyms\",\n    \"keyboard-neighbors\",\n    \"partial-words\",\n    \"missing-letters\",\n  ],\n};\n\n/**\n * Merge user configuration with defaults\n */\nexport function mergeConfig(userConfig: Partial<FuzzyConfig> = {}): FuzzyConfig {\n  const baseConfig = { ...DEFAULT_CONFIG };\n\n  // Apply performance preset if specified\n  if (userConfig.performance && userConfig.performance !== \"balanced\") {\n    const performanceConfig = PERFORMANCE_CONFIGS[userConfig.performance];\n    Object.assign(baseConfig, performanceConfig);\n  }\n\n  // Apply user overrides\n  const mergedConfig = { ...baseConfig, ...userConfig };\n\n  // Auto-adjust features based on languages if not explicitly set\n  if (!userConfig.features && userConfig.languages) {\n    const recommendedFeatures = new Set<FuzzyFeature>();\n\n    for (const lang of userConfig.languages) {\n      const langFeatures = LANGUAGE_FEATURES[lang] || LANGUAGE_FEATURES.english;\n      langFeatures.forEach((feature) => recommendedFeatures.add(feature));\n    }\n\n    mergedConfig.features = Array.from(recommendedFeatures);\n  }\n\n  return mergedConfig;\n}\n\n/**\n * Validate configuration\n */\nexport function validateConfig(config: FuzzyConfig): void {\n  if (config.maxResults < 1) {\n    throw new Error(\"maxResults must be at least 1\");\n  }\n\n  if (config.minQueryLength < 1) {\n    throw new Error(\"minQueryLength must be at least 1\");\n  }\n\n  if (config.fuzzyThreshold < 0 || config.fuzzyThreshold > 1) {\n    throw new Error(\"fuzzyThreshold must be between 0 and 1\");\n  }\n\n  if (config.maxEditDistance < 0) {\n    throw new Error(\"maxEditDistance must be non-negative\");\n  }\n\n  if (config.ngramSize < 2) {\n    throw new Error(\"ngramSize must be at least 2\");\n  }\n\n  if (config.languages.length === 0) {\n    throw new Error(\"At least one language must be specified\");\n  }\n}\n"],"names":[],"mappings":"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"}