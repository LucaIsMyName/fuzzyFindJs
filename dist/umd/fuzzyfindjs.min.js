(function(d,L){typeof exports=="object"&&typeof module<"u"?L(exports):typeof define=="function"&&define.amd?define(["exports"],L):(d=typeof globalThis<"u"?globalThis:d||self,L(d.FuzzyFindJS={}))})(this,(function(d){"use strict";const L={exact:1,prefix:.9,substring:.8,phonetic:.35,fuzzy:.65,fuzzyMin:.3,synonym:.4,compound:.75,ngram:.3},Q={baseScore:0,shortWordBoost:0,shortWordMaxDiff:3,prefixLengthPenalty:!1},fe={languages:["english"],features:["phonetic","compound","synonyms","keyboard-neighbors","partial-words","missing-letters","extra-letters","transpositions"],performance:"balanced",maxResults:10,minQueryLength:2,fuzzyThreshold:.55,maxEditDistance:2,ngramSize:3,enableAlphanumericSegmentation:!0,alphanumericAlphaWeight:.7,alphanumericNumericWeight:.3,alphanumericNumericEditDistanceMultiplier:1.5,matchTypeScores:L,scoringModifiers:Q},ge={fast:{performance:"fast",features:["partial-words","missing-letters"],maxEditDistance:1,fuzzyThreshold:.7,maxResults:3,enableAlphanumericSegmentation:!0,matchTypeScores:{exact:1,prefix:.8,substring:.5,fuzzy:.7,fuzzyMin:.2}},balanced:{performance:"balanced",features:["phonetic","compound","synonyms","keyboard-neighbors","partial-words","missing-letters","extra-letters","transpositions"],maxEditDistance:2,fuzzyThreshold:.55,maxResults:10,enableAlphanumericSegmentation:!0},comprehensive:{performance:"comprehensive",features:["phonetic","compound","synonyms","keyboard-neighbors","partial-words","missing-letters","extra-letters","transpositions"],maxEditDistance:3,fuzzyThreshold:.5,maxResults:20,enableAlphanumericSegmentation:!0,matchTypeScores:{exact:1,prefix:.6,substring:.7,fuzzy:.5,fuzzyMin:.05,phonetic:.6,synonym:.5,compound:.7,ngram:.6}}},me={german:["phonetic","compound","synonyms","keyboard-neighbors","partial-words","missing-letters","extra-letters"],english:["phonetic","synonyms","keyboard-neighbors","partial-words","missing-letters","transpositions"],spanish:["phonetic","synonyms","keyboard-neighbors","partial-words","missing-letters"],french:["phonetic","synonyms","keyboard-neighbors","partial-words","missing-letters"]};function de(t={}){const e={...fe};if(t.performance&&t.performance!=="balanced"){const s=ge[t.performance];Object.assign(e,s),s.matchTypeScores&&(e.matchTypeScores={...L,...s.matchTypeScores}),s.scoringModifiers&&(e.scoringModifiers={...Q,...s.scoringModifiers})}const n={...e,...t};if(t.matchTypeScores&&(n.matchTypeScores={...e.matchTypeScores,...t.matchTypeScores}),t.scoringModifiers&&(n.scoringModifiers={...e.scoringModifiers,...t.scoringModifiers}),!t.features&&t.languages){const s=new Set;for(const r of t.languages)(me[r]||me.english).forEach(a=>s.add(a));n.features=Array.from(s)}return n}function Ye(t){if(t.maxResults<1)throw new Error("maxResults must be at least 1");if(t.minQueryLength<1)throw new Error("minQueryLength must be at least 1");if(t.fuzzyThreshold<0||t.fuzzyThreshold>1)throw new Error("fuzzyThreshold must be between 0 and 1");if(t.maxEditDistance<0)throw new Error("maxEditDistance must be non-negative");if(t.ngramSize<2)throw new Error("ngramSize must be at least 2");if(t.languages.length===0)throw new Error("At least one language must be specified")}class F{normalize(e){return e.toLowerCase().trim().replace(/\s+/g," ")}getPhoneticCode(e){const n=this.normalize(e);if(n.length===0)return"";let s=n[0].toUpperCase();const r={b:"1",f:"1",p:"1",v:"1",c:"2",g:"2",j:"2",k:"2",q:"2",s:"2",x:"2",z:"2",d:"3",t:"3",l:"4",m:"5",n:"5",r:"6"};for(let i=1;i<n.length&&s.length<4;i++){const a=n[i],o=r[a];o&&o!==s[s.length-1]&&(s+=o)}return s.padEnd(4,"0")}splitCompoundWords(e){return e.includes(" ")?e.trim().split(/\s+/).filter(n=>n.length>0):[e]}getWordVariants(e,n){const s=new Set,r=this.normalize(e);s.add(r),s.add(e);const i=this.getCommonEndings();for(const a of i)r.endsWith(a)&&r.length>a.length+2&&s.add(r.slice(0,-a.length));if(r.length>4){let a;n==="fast"?a=r.length<=6?2:r.length<=12?3:4:n==="comprehensive"?a=r.length<=6?3:r.length<=12?6:8:a=r.length<=6?2:r.length<=12?4:6;const o=Math.max(1,Math.floor((r.length-3)/a));for(let c=3;c<r.length&&(s.add(r.slice(0,c)),!(s.size-2>=a));c+=o);}return Array.from(s)}getCommonEndings(){return["s","es","ed","ing","er","est"]}getSynonyms(e){return[]}isValidSubstitution(e,n){const r=this.getKeyboardNeighbors()[e.toLowerCase()];return r?r.includes(n.toLowerCase()):!1}getKeyboardNeighbors(){return{q:["w","a","s"],w:["q","e","a","s","d"],e:["w","r","s","d","f"],r:["e","t","d","f","g"],t:["r","y","f","g","h"],y:["t","u","g","h","j"],u:["y","i","h","j","k"],i:["u","o","j","k","l"],o:["i","p","k","l"],p:["o","l"],a:["q","w","s","z","x"],s:["q","w","e","a","d","z","x","c"],d:["w","e","r","s","f","x","c","v"],f:["e","r","t","d","g","c","v","b"],g:["r","t","y","f","h","v","b","n"],h:["t","y","u","g","j","b","n","m"],j:["y","u","i","h","k","n","m"],k:["u","i","o","j","l","m"],l:["i","o","p","k"],z:["a","s","x"],x:["a","s","d","z","c"],c:["s","d","f","x","v"],v:["d","f","g","c","b"],b:["f","g","h","v","n"],n:["g","h","j","b","m"],m:["h","j","k","n"]}}generateNgrams(e,n=3){const s=this.normalize(e);if(s.length<n)return[s];const r=[];for(let i=0;i<=s.length-n;i++)r.push(s.slice(i,i+n));return r}calculateEditDistance(e,n){const s=[],r=e.length,i=n.length;for(let a=0;a<=r;a++)s[a]=[a];for(let a=0;a<=i;a++)s[0][a]=a;for(let a=1;a<=r;a++)for(let o=1;o<=i;o++){const c=e[a-1]===n[o-1]?0:1;s[a][o]=Math.min(s[a-1][o]+1,s[a][o-1]+1,s[a-1][o-1]+c)}return s[r][i]}}class V extends F{language="german";displayName="Deutsch";supportedFeatures=["phonetic","compound","synonyms","keyboard-neighbors","partial-words","missing-letters","extra-letters"];normalize(e){return e.toLowerCase().trim().replace(/\s+/g," ").replace(/ä/g,"ae").replace(/ö/g,"oe").replace(/ü/g,"ue").replace(/ß/g,"ss")}getPhoneticCode(e){const n=this.normalize(e);if(n.length===0)return"";let s="",r="";for(let i=0;i<n.length;i++){const a=n[i],o=i<n.length-1?n[i+1]:"";let c="";switch(a){case"a":case"e":case"i":case"j":case"o":case"u":case"y":c="0";break;case"h":continue;case"b":case"p":c="1";break;case"d":case"t":o==="c"||o==="s"||o==="z"?c="8":c="2";break;case"f":case"v":case"w":c="3";break;case"g":case"k":case"q":c="4";break;case"c":i===0?o==="a"||o==="h"||o==="k"||o==="l"||o==="o"||o==="q"||o==="r"||o==="u"||o==="x"?c="4":c="8":r==="s"||r==="z"?c="8":o==="h"||o==="k"||o==="q"?c="4":c="8";break;case"x":r==="c"||r==="k"||r==="q"?c="8":c="48";break;case"l":c="5";break;case"m":case"n":c="6";break;case"r":c="7";break;case"s":case"z":c="8";break;default:continue}c&&c!==r&&(s+=c),r=c}return s||"0"}splitCompoundWords(e){const n=this.normalize(e);if(n.length<6)return[e];const s=[],r=this.getCommonPrefixes(),i=this.getCommonSuffixes(),a=this.getCommonWords();for(const o of r)if(n.startsWith(o)&&n.length>o.length+3){const c=n.slice(o.length);s.push(o),s.push(...this.splitCompoundWords(c));break}if(s.length===0){for(const o of i)if(n.endsWith(o)&&n.length>o.length+3){const c=n.slice(0,-o.length);s.push(...this.splitCompoundWords(c)),s.push(o);break}}if(s.length===0)for(let o=3;o<=n.length-3;o++){const c=n.slice(0,o),l=n.slice(o);if(a.has(c)&&l.length>=3){s.push(c),s.push(...this.splitCompoundWords(l));break}}return s.length>0?s:[e]}getWordVariants(e,n){const s=new Set(super.getWordVariants(e,n)),r=this.splitCompoundWords(e);return r.length>1&&r.forEach(i=>{i.length>=3&&s.add(this.normalize(i))}),Array.from(s)}getCommonEndings(){return["en","e","er","n","r","s","es","t","ung","heit","keit","schaft","chen","lein","lich","ig","isch","bar","los","voll"]}getSynonyms(e){const n={arzt:["doktor","mediziner","doc"],krankenhaus:["spital","klinik","hospital"],schule:["bildungseinrichtung","lehranstalt"],auto:["wagen","fahrzeug","pkw"],haus:["gebaeude","heim","wohnhaus"],strasse:["weg","gasse","allee"],stadt:["ort","gemeinde","ortschaft"],arbeit:["job","beruf","taetigkeit"],geld:["waehrung","kapital","finanzen"],zeit:["dauer","periode","zeitraum"]},s=this.normalize(e);return n[s]||[]}getKeyboardNeighbors(){return{q:["w","a","s"],w:["q","e","a","s","d"],e:["w","r","s","d","f"],r:["e","t","d","f","g"],t:["r","z","f","g","h"],z:["t","u","g","h","j"],u:["z","i","h","j","k"],i:["u","o","j","k","l"],o:["i","p","k","l","oe"],p:["o","ue","l","oe"],ue:["p","ae"],a:["q","w","s","y","x"],s:["q","w","e","a","d","y","x","c"],d:["w","e","r","s","f","x","c","v"],f:["e","r","t","d","g","c","v","b"],g:["r","t","z","f","h","v","b","n"],h:["t","z","u","g","j","b","n","m"],j:["z","u","i","h","k","n","m"],k:["u","i","o","j","l","m"],l:["i","o","p","k","oe"],oe:["o","p","ue","l","ae"],ae:["ue","oe"],y:["a","s","x"],x:["a","s","d","y","c"],c:["s","d","f","x","v"],v:["d","f","g","c","b"],b:["f","g","h","v","n"],n:["g","h","j","b","m"],m:["h","j","k","n"]}}getCommonPrefixes(){return["un","vor","nach","bei","mit","ab","an","auf","aus","ein","gegen","hinter","neben","ueber","unter","zwischen","selbst"]}getCommonSuffixes(){return["haus","platz","strasse","weg","hof","berg","tal","feld","stadt","dorf","heim","werk","bau","anlage","zentrum"]}getCommonWords(){return new Set(["kranken","kinder","frauen","maenner","alt","neu","gross","klein","hoch","tief","lang","kurz","breit","schmal","dick","duenn","stark","schwach","schnell","langsam","heiss","kalt","warm","auto","bahn","bus","zug","flug","schiff","rad","motor","wasser","feuer","erde","luft","licht","schatten","sonne","mond","tag","nacht","morgen","abend","mittag","zeit","jahr","monat"])}}class X extends F{language="english";displayName="English";supportedFeatures=["phonetic","synonyms","keyboard-neighbors","partial-words","missing-letters","extra-letters","transpositions"];normalize(e){return e.toLowerCase().trim().replace(/\s+/g," ").replace(/won't/g,"will not").replace(/can't/g,"cannot").replace(/n't/g," not").replace(/'re/g," are").replace(/'ve/g," have").replace(/'ll/g," will").replace(/'d/g," would").replace(/'m/g," am").replace(/'/g,"")}getPhoneticCode(e){const n=this.normalize(e).replace(/[^a-z]/g,"");if(n.length===0)return"";let s="",r=0;const i=n.length;for((n.startsWith("gn")||n.startsWith("kn")||n.startsWith("pn")||n.startsWith("wr"))&&(r=1);r<i&&s.length<4;){const a=n[r],o=r+1<i?n[r+1]:"",c=r>0?n[r-1]:"";switch(a){case"a":case"e":case"i":case"o":case"u":r===0&&(s+=a.toUpperCase());break;case"b":r===i-1&&c==="m"||(s+="B");break;case"c":o==="h"?(s+="X",r++):o==="i"||o==="e"||o==="y"?s+="S":s+="K";break;case"d":o==="g"?(s+="J",r++):s+="T";break;case"f":s+="F";break;case"g":o==="h"&&r!==0||(o==="n"?(s+="N",r++):o==="i"||o==="e"||o==="y"?s+="J":s+="K");break;case"h":(r===0||"aeiou".includes(c)||"aeiou".includes(o))&&(s+="H");break;case"j":s+="J";break;case"k":c!=="c"&&(s+="K");break;case"l":s+="L";break;case"m":s+="M";break;case"n":s+="N";break;case"p":o==="h"?(s+="F",r++):s+="P";break;case"q":s+="K";break;case"r":s+="R";break;case"s":o==="h"?(s+="X",r++):s+="S";break;case"t":o==="h"?(s+="0",r++):o==="i"&&r+2<i&&(n[r+2]==="a"||n[r+2]==="o")?s+="X":s+="T";break;case"v":s+="F";break;case"w":"aeiou".includes(o)&&(s+="W");break;case"x":s+="KS";break;case"y":"aeiou".includes(o)&&(s+="Y");break;case"z":s+="S";break}r++}return s||"A"}getWordVariants(e,n){const s=new Set(super.getWordVariants(e,n)),r=this.normalize(e);if(r.endsWith("s")&&r.length>3&&s.add(r.slice(0,-1)),r.endsWith("s")||s.add(r+"s"),r.endsWith("ing")&&r.length>5){const i=r.slice(0,-3);s.add(i),s.add(i+"e")}if(r.endsWith("ed")&&r.length>4){const i=r.slice(0,-2);s.add(i),s.add(i+"e")}return Array.from(s)}getCommonEndings(){return["s","es","ed","ing","er","est","ly","tion","sion","ness","ment","able","ible","ful","less","ous","ious","al","ial","ic","ive","ary","ery","ory"]}getSynonyms(e){const n={doctor:["physician","medic","doc","md"],hospital:["clinic","medical center","infirmary"],school:["academy","institution","college","university"],car:["vehicle","automobile","auto"],house:["home","residence","dwelling","building"],street:["road","avenue","lane","boulevard"],city:["town","municipality","urban area"],work:["job","employment","occupation","career"],money:["cash","currency","funds","capital"],time:["duration","period","moment","hour"],big:["large","huge","enormous","massive","giant"],small:["little","tiny","miniature","petite"],fast:["quick","rapid","speedy","swift"],slow:["sluggish","gradual","leisurely"],good:["excellent","great","wonderful","fine"],bad:["poor","terrible","awful","horrible"],happy:["joyful","cheerful","glad","pleased"],sad:["unhappy","depressed","melancholy","sorrowful"]},s=this.normalize(e);return n[s]||[]}}class Z extends F{language="spanish";displayName="Español";supportedFeatures=["phonetic","synonyms","keyboard-neighbors","partial-words","missing-letters","extra-letters"];normalize(e){return e.toLowerCase().trim().replace(/\s+/g," ").replace(/á/g,"a").replace(/é/g,"e").replace(/í/g,"i").replace(/ó/g,"o").replace(/ú/g,"u").replace(/ñ/g,"n").replace(/ü/g,"u")}getPhoneticCode(e){const n=this.normalize(e);if(n.length===0)return"";let s="",r="";for(let i=0;i<n.length;i++){const a=n[i],o=i<n.length-1?n[i+1]:"";let c="";switch(a){case"a":case"e":case"i":case"o":case"u":c="0";break;case"b":case"v":c="1";break;case"c":o==="h"?c="2":o==="e"||o==="i"?c="8":c="4";break;case"d":c="3";break;case"f":c="5";break;case"g":o==="u"&&i+2<n.length&&(n[i+2]==="e"||n[i+2]==="i")?c="4":o==="e"||o==="i"?c="6":c="4";break;case"h":continue;case"j":c="6";break;case"k":c="4";break;case"l":o==="l"?c="7":c="5";break;case"m":c="6";break;case"n":o==="n"?c="7":c="6";break;case"ñ":c="7";break;case"p":c="1";break;case"q":c="4";break;case"r":o==="r"||i===0?c="8":c="7";break;case"s":c="8";break;case"t":c="3";break;case"w":c="1";break;case"x":c="48";break;case"y":c="7";break;case"z":c="8";break;default:continue}c&&c!==r&&(s+=c),r=c}return s||"0"}getCommonEndings(){return["o","a","os","as","e","es","ar","er","ir","ado","ada","idos","idas","ando","endo","iendo","cion","sion","dad","tad","mente","oso","osa","ito","ita","illo","illa"]}getSynonyms(e){const n={medico:["doctor","facultativo"],hospital:["clinica","sanatorio"],escuela:["colegio","instituto"],coche:["auto","automovil","vehiculo"],casa:["hogar","vivienda","domicilio"],calle:["via","avenida","carretera"],ciudad:["urbe","poblacion","municipio"],trabajo:["empleo","ocupacion","labor"],dinero:["plata","efectivo","capital"],tiempo:["momento","periodo","duracion"],grande:["enorme","gigante","inmenso"],pequeno:["chico","diminuto","minusculo"],rapido:["veloz","ligero","acelerado"],lento:["despacio","pausado"],bueno:["excelente","magnifico","estupendo"],malo:["pesimo","terrible","horrible"]},s=this.normalize(e);return n[s]||[]}}class K extends F{language="french";displayName="Français";supportedFeatures=["phonetic","synonyms","keyboard-neighbors","partial-words","missing-letters","extra-letters"];normalize(e){return e.toLowerCase().trim().replace(/\s+/g," ").replace(/[àáâãä]/g,"a").replace(/[èéêë]/g,"e").replace(/[ìíîï]/g,"i").replace(/[òóôõö]/g,"o").replace(/[ùúûü]/g,"u").replace(/ç/g,"c").replace(/ñ/g,"n").replace(/ÿ/g,"y")}getPhoneticCode(e){const n=this.normalize(e);if(n.length===0)return"";let s="",r="";for(let i=0;i<n.length;i++){const a=n[i],o=i<n.length-1?n[i+1]:"",c=i<n.length-2?n[i+2]:"";let l="";switch(a){case"a":case"e":case"i":case"o":case"u":case"y":l="0";break;case"b":l="1";break;case"c":o==="h"?l="2":o==="e"||o==="i"?l="8":l="4";break;case"d":l="3";break;case"f":l="5";break;case"g":o==="n"?l="6":o==="u"&&(c==="e"||c==="i")?l="4":o==="e"||o==="i"?l="6":l="4";break;case"h":i===0&&(l="0");break;case"j":l="6";break;case"k":l="4";break;case"l":l="5";break;case"m":l="6";break;case"n":l="6";break;case"p":o==="h"?l="5":l="1";break;case"q":l="4";break;case"r":l="7";break;case"s":l="8";break;case"t":l="3";break;case"v":l="5";break;case"w":l="5";break;case"x":l="48";break;case"z":l="8";break;default:continue}l&&l!==r&&(s+=l),r=l}return s||"0"}getCommonEndings(){return["e","es","s","x","ent","ant","ment","tion","sion","eur","euse","teur","trice","able","ible","ique","aire","oire","ette","elle","esse","asse","isse","age","isme","iste","ite","ude","ade"]}getSynonyms(e){const n={medecin:["docteur","praticien"],hopital:["clinique","centre medical"],ecole:["etablissement","institution"],voiture:["automobile","vehicule","auto"],maison:["domicile","residence","habitation"],rue:["avenue","boulevard","voie"],ville:["cite","commune","agglomeration"],travail:["emploi","occupation","metier"],argent:["monnaie","especes","capital"],temps:["duree","periode","moment"],grand:["enorme","immense","gigantesque"],petit:["minuscule","minime","reduit"],rapide:["vite","accelere","prompt"],lent:["lentement","doucement"],bon:["excellent","parfait","formidable"],mauvais:["terrible","affreux","horrible"],heureux:["joyeux","content","ravi"],triste:["malheureux","chagrine","melancolique"]},s=this.normalize(e);return n[s]||[]}getKeyboardNeighbors(){return{a:["z","e","r","q","s"],z:["a","e","r","q","s","d"],e:["z","r","t","s","d","f"],r:["e","t","y","d","f","g"],t:["r","y","u","f","g","h"],y:["t","u","i","g","h","j"],u:["y","i","o","h","j","k"],i:["u","o","p","j","k","l"],o:["i","p","k","l","m"],p:["o","l","m"],q:["a","z","s","w","x"],s:["a","z","e","q","d","w","x","c"],d:["z","e","r","s","f","x","c","v"],f:["e","r","t","d","g","c","v","b"],g:["r","t","y","f","h","v","b","n"],h:["t","y","u","g","j","b","n"],j:["y","u","i","h","k","n"],k:["u","i","o","j","l"],l:["i","o","p","k","m"],m:["o","p","l"],w:["q","s","x"],x:["q","s","d","w","c"],c:["s","d","f","x","v"],v:["d","f","g","c","b"],b:["f","g","h","v","n"],n:["g","h","j","b"]}}}class J{static processors=new Map([["german",new V],["english",new X],["spanish",new Z],["french",new K]]);static getProcessor(e){return this.processors.get(e.toLowerCase())}static getProcessors(e){return e.map(n=>this.getProcessor(n)).filter(n=>n!==void 0)}static getAvailableLanguages(){return Array.from(this.processors.keys())}static registerProcessor(e){this.processors.set(e.language.toLowerCase(),e)}static isSupported(e){return this.processors.has(e.toLowerCase())}static getProcessorInfo(){return Array.from(this.processors.values()).map(e=>({language:e.language,displayName:e.displayName,supportedFeatures:e.supportedFeatures}))}}const qe=Object.freeze(Object.defineProperty({__proto__:null,BaseLanguageProcessor:F,EnglishProcessor:X,FrenchProcessor:K,GermanProcessor:V,LanguageRegistry:J,SpanishProcessor:Z},Symbol.toStringTag,{value:"Module"}));class et{pool=[];factory;reset;maxSize;constructor(e,n=1e3,s){this.factory=e,this.maxSize=n,this.reset=s}acquire(){const e=this.pool.pop();return e!==void 0?e:this.factory()}release(e){this.pool.length<this.maxSize&&(this.reset&&this.reset(e),this.pool.push(e))}clear(){this.pool=[]}size(){return this.pool.length}}class pe{pool=[];maxSize;constructor(e=1e3){this.maxSize=e}acquire(e){return this.pool.length>0?this.pool.pop():[]}release(e){this.pool.length<this.maxSize&&(e.length=0,this.pool.push(e))}clear(){this.pool=[]}size(){return this.pool.length}}const P=new pe(500);function tt(t,e){const n=P.acquire(t);try{return e(n)}finally{P.release(n)}}class ye{pool=[];maxSize;constructor(e=100){this.maxSize=e}acquire(){const e=this.pool.pop();return e!==void 0?e:new Map}release(e){this.pool.length<this.maxSize&&(e.clear(),this.pool.push(e))}clear(){this.pool=[]}size(){return this.pool.length}}class be{pool=[];maxSize;constructor(e=100){this.maxSize=e}acquire(){const e=this.pool.pop();return e!==void 0?e:new Set}release(e){this.pool.length<this.maxSize&&(e.clear(),this.pool.push(e))}clear(){this.pool=[]}size(){return this.pool.length}}const st=new ye(100),nt=new be(100);function N(t,e,n=1/0){const s=t.length,r=e.length;if(Math.abs(s-r)>n)return n+1;if(s===0)return r;if(r===0)return s;if(t===e)return 0;const i=P.acquire(r+1),a=P.acquire(r+1);try{for(let o=0;o<=r;o++)i[o]=o;for(let o=1;o<=s;o++){a[0]=o;let c=o;for(let l=1;l<=r;l++){const h=t[o-1]===e[l-1]?0:1;a[l]=Math.min(a[l-1]+1,i[l]+1,i[l-1]+h),c=Math.min(c,a[l])}if(c>n)return n+1;for(let l=0;l<=r;l++)i[l]=a[l]}return i[r]}finally{P.release(i),P.release(a)}}function H(t,e,n=1/0){const s=t.length,r=e.length;if(Math.abs(s-r)>n)return n+1;if(s===0)return r;if(r===0)return s;if(t===e)return 0;const i=Math.max(s,r),a=[],o=i+1;for(let h=0;h<=s+1;h++)a[h]=new Array(r+2).fill(o);a[0][0]=o;for(let h=0;h<=s;h++)a[h+1][0]=o,a[h+1][1]=h;for(let h=0;h<=r;h++)a[0][h+1]=o,a[1][h+1]=h;const c=new Map;for(let h=1;h<=s;h++){let u=0;for(let f=1;f<=r;f++){const g=t[h-1],m=e[f-1],y=c.get(m)||0;let b=1;g===m&&(b=0,u=f),a[h+1][f+1]=Math.min(a[h][f]+b,a[h+1][f]+1,a[h][f+1]+1,a[y][u]+(h-y-1)+1+(f-u-1))}c.set(t[h-1],h)}const l=a[s+1][r+1];return l>n?n+1:l}function Y(t,e,n=3){if(t===e)return 1;if(t.length===0||e.length===0)return 0;const s=D(t,n),r=D(e,n);if(s.length===0&&r.length===0)return 1;if(s.length===0||r.length===0)return 0;const i=new Set(s),a=new Set(r);let o=0;for(const l of i)a.has(l)&&o++;const c=i.size+a.size-o;return c>0?o/c:0}function D(t,e){if(t.length<e)return[t];const n=t.length-e+1,s=new Array(n);for(let r=0;r<n;r++)s[r]=t.slice(r,r+e);return s}function we(t,e){return e===0?t===0?1:0:Math.max(0,1-t/e)}function rt(t,e,n=.8,s=2){if(t===e)return!0;const r=Math.max(t.length,e.length);if(Math.abs(t.length-e.length)>s||Y(t,e)<n-.2)return!1;const a=N(t,e,s);return we(a,r)>=n}function ze(t,e,n,s){const r=e.config.wordBoundaries||!1;if(t.includes("*")){for(const o of e.base)ot(o,t)&&(n.has(o)||n.set(o,{word:o,normalized:t,matchType:"exact",editDistance:0,language:s}));return}const i=e.variantToBase.get(t.toLowerCase());i&&i.forEach(o=>{if(r&&!ve(o,t,r))return;const c=n.get(o);(!c||c.matchType!=="exact")&&n.set(o,{word:o,normalized:t,matchType:"exact",editDistance:0,language:s})});const a=t.toLowerCase();for(const o of e.base)o.toLowerCase()===a&&(n.has(o)||n.set(o,{word:o,normalized:t,matchType:"exact",editDistance:0,language:s}))}function Se(t,e,n,s){const r=e.config.wordBoundaries||!1,i=t.toLowerCase();for(const[a,o]of e.variantToBase.entries())a.startsWith(i)&&a!==i&&o.forEach(c=>{r&&!ve(c,t,r)||n.has(c)||n.set(c,{word:c,normalized:a,matchType:"prefix",language:s})})}function it(t,e,n,s){const r=t.toLowerCase();if(!(r.length<2))for(const[i,a]of e.variantToBase.entries())i.includes(r)&&!i.startsWith(r)&&i!==r&&a.forEach(o=>{const c=n.get(o);(!c||c.matchType!=="exact"&&c.matchType!=="prefix")&&n.set(o,{word:o,normalized:i,matchType:"substring",language:s})})}function q(t,e,n,s){if(!e.supportedFeatures.includes("phonetic"))return;const r=e.getPhoneticCode(t);if(r){const i=n.phoneticToBase.get(r);i&&i.forEach(a=>{s.has(a)||s.set(a,{word:a,normalized:t,matchType:"phonetic",phoneticCode:r,language:e.language})})}}function ke(t,e,n){const s=e.synonymMap.get(t.toLowerCase());s&&s.forEach(r=>{n.has(r)||n.set(r,{word:r,normalized:t,matchType:"synonym",language:"synonym"})})}function ee(t,e,n,s,r){if(t.length<r)return;const i=D(t,r),a=new Set;i.forEach(o=>{const c=e.ngramIndex.get(o);c&&c.forEach(l=>a.add(l))}),a.forEach(o=>{n.has(o)||n.set(o,{word:o,normalized:t,matchType:"ngram",language:s})})}function te(t,e,n,s,r){let i=r.maxEditDistance;(t.length<=3||t.length<=4)&&(i=Math.max(i,2));for(const[a,o]of e.variantToBase.entries()){const c=Math.abs(a.length-t.length),l=t.length<=3?5:t.length<=4?4:i;if(c<=l){const u=e.config.features?.includes("transpositions")?H(t,a,i):N(t,a,i),f=t.length<=3?2:i;u<=f&&o.forEach(g=>{const m=n.get(g);(!m||m.matchType!=="exact"&&m.matchType!=="prefix"&&(m.editDistance||1/0)>u)&&n.set(g,{word:g,normalized:a,matchType:"fuzzy",editDistance:u,language:s.language})})}}}function ve(t,e,n){if(!n)return!0;const s=t.toLowerCase(),r=e.toLowerCase();return new RegExp(`\\b${Te(r)}`,"i").test(s)}function ot(t,e){const n=e.split("*").map(Te).join(".*");return new RegExp(`^${n}$`,"i").test(t)}function Te(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}class R{root;size;constructor(){this.root=this.createNode(),this.size=0}createNode(){return{children:new Map,isEndOfWord:!1,docIds:new Set}}insert(e,n){if(!e)return;let s=this.root;for(const r of e)s.children.has(r)||s.children.set(r,this.createNode()),s=s.children.get(r);s.isEndOfWord=!0,s.term=e,n.forEach(r=>s.docIds.add(r)),this.size++}findWithPrefix(e){if(!e)return[];let n=this.root;for(const r of e){if(!n.children.has(r))return[];n=n.children.get(r)}const s=[];return this.collectTerms(n,s),s}has(e){let n=this.root;for(const s of e){if(!n.children.has(s))return!1;n=n.children.get(s)}return n.isEndOfWord}get(e){let n=this.root;for(const s of e){if(!n.children.has(s))return null;n=n.children.get(s)}return n.isEndOfWord?Array.from(n.docIds):null}collectTerms(e,n){e.isEndOfWord&&e.term&&n.push([e.term,Array.from(e.docIds)]);for(const s of e.children.values())this.collectTerms(s,n)}getSize(){return this.size}clear(){this.root=this.createNode(),this.size=0}toJSON(){return{root:this.serializeNode(this.root),size:this.size}}static fromJSON(e){const n=new R;return n.root=R.deserializeNode(e.root),n.size=e.size,n}serializeNode(e){return{children:Array.from(e.children.entries()).map(([n,s])=>[n,this.serializeNode(s)]),isEndOfWord:e.isEndOfWord,docIds:Array.from(e.docIds),term:e.term}}static deserializeNode(e){const n={children:new Map,isEndOfWord:e.isEndOfWord,docIds:new Set(e.docIds),term:e.term};for(const[s,r]of e.children)n.children.set(s,R.deserializeNode(r));return n}}const I={k1:1.2,b:.75,minIDF:.1};function Ee(t,e,n=I){const s=e.documentFrequencies.get(t)||0,r=e.totalDocs;if(s===0||r===0)return n.minIDF;const i=Math.log((r-s+.5)/(s+.5)+1);return Math.max(i,n.minIDF)}function at(t,e,n,s=I){const r=e.termFrequencies.get(t)||0;if(r===0)return 0;const i=Ee(t,n,s),a=e.length,o=n.avgDocLength,c=r*(s.k1+1),l=r+s.k1*(1-s.b+s.b*(a/o));return i*(c/l)}function Le(t,e,n,s=I){let r=0;for(const i of t)r+=at(i,e,n,s);return r}function ct(t){const e=t.length;let n=0;const s=new Map;for(const i of t){n+=i.length;const a=new Set(i.termFrequencies.keys());for(const o of a)s.set(o,(s.get(o)||0)+1)}const r=e>0?n/e:0;return{totalDocs:e,avgDocLength:r,documentFrequencies:s}}function Me(t,e=10){if(e===0)return 0;const n=t/e*6-3;return 1/(1+Math.exp(-n))}function lt(t,e,n=.6,s=.4){const r=n+s,i=n/r,a=s/r;return i*t+a*e}class B{bitArray;size;numHashFunctions;numElements=0;constructor(e){const n=e.expectedElements,s=e.falsePositiveRate;this.size=Math.ceil(-(n*Math.log(s))/Math.log(2)**2),this.numHashFunctions=Math.ceil(this.size/n*Math.log(2)),this.bitArray=new Uint8Array(Math.ceil(this.size/8))}add(e){const n=this.getHashes(e);for(const s of n){const r=Math.floor(s/8),i=s%8;this.bitArray[r]|=1<<i}this.numElements++}mightContain(e){const n=this.getHashes(e);for(const s of n){const r=Math.floor(s/8),i=s%8;if((this.bitArray[r]&1<<i)===0)return!1}return!0}getHashes(e){const n=this.hash(e,0),s=this.hash(e,1),r=[];for(let i=0;i<this.numHashFunctions;i++){const a=(n+i*s)%this.size;r.push(Math.abs(a))}return r}hash(e,n){let s=2166136261^n;for(let r=0;r<e.length;r++)s^=e.charCodeAt(r),s+=(s<<1)+(s<<4)+(s<<7)+(s<<8)+(s<<24);return s>>>0}getFalsePositiveRate(){if(this.numElements===0)return 0;const e=this.numHashFunctions,n=this.numElements,s=this.size;return Math.pow(1-Math.exp(-e*n/s),e)}getStats(){return{size:this.size,numHashFunctions:this.numHashFunctions,numElements:this.numElements,falsePositiveRate:this.getFalsePositiveRate(),memoryUsage:this.bitArray.byteLength}}clear(){this.bitArray.fill(0),this.numElements=0}toJSON(){return{bitArray:Array.from(this.bitArray),size:this.size,numHashFunctions:this.numHashFunctions,numElements:this.numElements}}static fromJSON(e){const n=new B({expectedElements:100,falsePositiveRate:.01});return n.bitArray=new Uint8Array(e.bitArray),n.size=e.size,n.numHashFunctions=e.numHashFunctions,n.numElements=e.numElements,n}}function ht(t,e=.01){return new B({expectedElements:t,falsePositiveRate:e})}const ut=/[\s\-_.,;:!?()[\]{}'"\/\\#@$%^&*+=<>|~`]+/;function O(t,e={}){const{keepEmpty:n=!1,minLength:s=0,lowercase:r=!1}=e;let i=t.split(ut);return n||(i=i.filter(a=>a.length>0)),s>0&&(i=i.filter(a=>a.length>=s)),r&&(i=i.map(a=>a.toLowerCase())),i}function se(t,e,n,s){const r=[],i={termToPostings:new Map,termTrie:new R,phoneticToPostings:new Map,ngramToPostings:new Map,synonymToPostings:new Map,fieldIndices:new Map,totalDocs:0,avgDocLength:0};let a=0,o=0;for(const l of t){if(!l||l.trim().length<n.minQueryLength)continue;const h=l.trim();for(const u of e){const f=u.normalize(h),g=s.has("phonetic")&&u.supportedFeatures.includes("phonetic")?u.getPhoneticCode(h):void 0,m=s.has("compound")&&u.supportedFeatures.includes("compound")?u.splitCompoundWords(h):void 0,y={id:o,word:h,normalized:f,phoneticCode:g,language:u.language,compoundParts:m&&m.length>1?m:void 0};r.push(y),a+=f.length,E(i.termToPostings,f,o),i.termTrie.insert(f,[o]);const b=h.toLowerCase();E(i.termToPostings,b,o),i.termTrie.insert(b,[o]);const w=O(h,{lowercase:!0,minLength:1});if(w.length>1&&w.forEach(k=>{k.length>=n.minQueryLength&&(E(i.termToPostings,k,o),i.termTrie.insert(k,[o]))}),s.has("partial-words")&&u.getWordVariants(h,n.performance).forEach(z=>{E(i.termToPostings,z,o),i.termTrie.insert(z,[o])}),g&&E(i.phoneticToPostings,g,o),D(f,n.ngramSize).forEach(k=>{E(i.ngramToPostings,k,o)}),m&&m.length>1&&m.forEach(k=>{const z=u.normalize(k);E(i.termToPostings,z,o),i.termTrie.insert(z,[o])}),s.has("synonyms")&&(u.getSynonyms(f).forEach(z=>{E(i.synonymToPostings,z,o)}),n.customSynonyms)){const z=n.customSynonyms[f];z&&z.forEach(T=>{E(i.synonymToPostings,T,o)})}o++}}if(i.totalDocs=o,i.avgDocLength=a/Math.max(1,o),n.useBM25){const l=new Map,h=new Map;for(const[u,f]of i.termToPostings.entries())l.set(u,f.docIds.length);r.forEach(u=>{h.set(u.id,u.normalized.length)}),i.bm25Stats={documentFrequencies:l,documentLengths:h}}if(n.useBloomFilter||t.length>=1e4){const l=n.bloomFilterFalsePositiveRate||.01,h=new B({expectedElements:i.termToPostings.size,falsePositiveRate:l});for(const u of i.termToPostings.keys())h.add(u);i.bloomFilter=h}return{invertedIndex:i,documents:r}}function ft(t,e,n,s,r){const i=new Map,a=new Set(r.features);for(const o of s){const c=o.normalize(n.trim());gt(c,t,e,i,o.language),mt(c,t,e,i,o.language),a.has("phonetic")&&o.supportedFeatures.includes("phonetic")&&dt(c,o,t,e,i),a.has("synonyms")&&pt(c,t,e,i),yt(c,t,e,i,o.language,r.ngramSize),!(r.performance==="fast"&&t.termToPostings.size>1e5&&i.size>=r.maxResults*2)&&(a.has("missing-letters")||a.has("extra-letters")||a.has("transpositions"))&&bt(c,t,e,i,o,r.maxEditDistance,r)}return Array.from(i.values())}function E(t,e,n){let s=t.get(e);s||(s={term:e,docIds:[]},t.set(e,s)),s.docIds.includes(n)||s.docIds.push(n)}function gt(t,e,n,s,r){if(e.bloomFilter&&!e.bloomFilter.mightContain(t))return;const i=e.termToPostings.get(t);i&&i.docIds.forEach(a=>{const o=n[a];o&&(s.has(a)||s.set(a,{word:o.word,normalized:t,matchType:"exact",editDistance:0,language:r,docId:a}))})}function mt(t,e,n,s,r){if(e.termTrie){const i=e.termTrie.findWithPrefix(t);for(const[a,o]of i)a!==t&&o.forEach(c=>{const l=n[c];l&&(s.has(c)||s.set(c,{word:l.word,normalized:a,matchType:"prefix",language:r,docId:c}))})}else for(const[i,a]of e.termToPostings.entries())i.startsWith(t)&&i!==t&&a.docIds.forEach(o=>{const c=n[o];c&&(s.has(o)||s.set(o,{word:c.word,normalized:i,matchType:"prefix",language:r,docId:o}))})}function dt(t,e,n,s,r){const i=e.getPhoneticCode(t);if(!i)return;const a=n.phoneticToPostings.get(i);a&&a.docIds.forEach(o=>{const c=s[o];c&&(r.has(o)||r.set(o,{word:c.word,normalized:t,matchType:"phonetic",phoneticCode:i,language:e.language,docId:o}))})}function pt(t,e,n,s){const r=e.synonymToPostings.get(t);r&&r.docIds.forEach(i=>{const a=n[i];a&&(s.has(i)||s.set(i,{word:a.word,normalized:t,matchType:"synonym",language:"synonym",docId:i}))})}function yt(t,e,n,s,r,i){if(t.length<i)return;const a=D(t,i),o=new Set;a.forEach(c=>{const l=e.ngramToPostings.get(c);l&&l.docIds.forEach(h=>o.add(h))}),o.forEach(c=>{const l=n[c];l&&(s.has(c)||s.set(c,{word:l.word,normalized:t,matchType:"ngram",language:r,docId:c}))})}function bt(t,e,n,s,r,i,a){const o=t.length,c=o-i,l=o+i,h=a.features?.includes("transpositions"),u=e.termToPostings.size,f=u>1e5?1e3:u>5e4?1500:u>2e4?3e3:u>1e4?5e3:8e3;let g=0,m;if(u>5e4&&t.length>=2&&e.termTrie){const y=u>1e5?Math.min(3,t.length):Math.min(2,t.length),b=t.substring(0,y);m=e.termTrie.findWithPrefix(b).map(([S,k])=>[S,e.termToPostings.get(S)]).filter(S=>S[1]!==void 0),m.length<100&&(m=Array.from(e.termToPostings.entries()))}else m=Array.from(e.termToPostings.entries());m.sort((y,b)=>{const w=Math.abs(y[0].length-o),S=Math.abs(b[0].length-o);return w-S});for(const[y,b]of m){const w=y.length;if(w<c||w>l)continue;if(g>=f)break;g++;const S=s.size,k=u>5e4?a.maxResults*3:a.maxResults*5;if(S>=k){let T=i,$=!1;for(const x of s.values())if(x.editDistance!==void 0)if(x.editDistance===0){$=!0,T=0;break}else x.editDistance<=1&&(T=Math.min(T,x.editDistance));if($&&S>=a.maxResults*10)break}if(t.length>0&&y.length>0&&Math.abs(t.charCodeAt(0)-y.charCodeAt(0))>10&&i<2)continue;const z=h?H(t,y,i):N(t,y,i);z<=i&&b.docIds.forEach(T=>{const $=n[T];if(!$)return;const x=s.get(T);(!x||(x.editDistance||1/0)>z)&&s.set(T,{word:$.word,normalized:y,matchType:"fuzzy",editDistance:z,language:r.language,docId:T})})}}function wt(t,e,n,s,r){if(!r.useBM25||!n.bm25Stats)return t;const i={...I,...r.bm25Config},a={totalDocs:n.totalDocs,avgDocLength:n.avgDocLength,documentFrequencies:n.bm25Stats.documentFrequencies};return t.map(o=>{if(o.docId===void 0)return o;const c=s[o.docId];if(!c)return o;const l=new Map,h=c.normalized.toLowerCase().split(/\s+/);for(const m of h)l.set(m,(l.get(m)||0)+1);const u={docId:c.id,length:h.length,termFrequencies:l},f=Le(e,u,a,i),g=Me(f);return{...o,bm25Score:g}})}function Ce(t,e,n){const s=[],r=n.toLowerCase(),i=e.toLowerCase();switch(t.matchType){case"exact":s.push({start:0,end:n.length,type:"exact"});break;case"prefix":const a=Math.min(i.length,n.length);s.push({start:0,end:a,type:"prefix"});break;case"substring":const o=r.indexOf(i);o!==-1&&s.push({start:o,end:o+i.length,type:"substring"});break;case"fuzzy":s.push(...zt(i,r,"fuzzy"));break;case"ngram":s.push(...St(i,r));break;case"phonetic":case"synonym":case"compound":s.push({start:0,end:n.length,type:t.matchType});break}return kt(s)}function zt(t,e,n){const s=[];let r=0,i=0;for(;r<t.length&&i<e.length;)if(t[r]===e[i]){const a=i;let o=i+1;for(r++,i++;r<t.length&&i<e.length&&t[r]===e[i];)o++,r++,i++;s.push({start:a,end:o,type:n})}else i++;return s}function St(t,e){const n=[];for(let r=0;r<=t.length-3;r++){const i=t.slice(r,r+3);let a=0;for(;;){const o=e.indexOf(i,a);if(o===-1)break;n.push({start:o,end:o+3,type:"ngram"}),a=o+1}}return n}function kt(t){if(t.length===0)return[];const e=[...t].sort((s,r)=>s.start-r.start),n=[e[0]];for(let s=1;s<e.length;s++){const r=e[s],i=n[n.length-1];r.start<=i.end?(i.end=Math.max(i.end,r.end),Pe(r.type)>Pe(i.type)&&(i.type=r.type)):n.push(r)}return n}function Pe(t){return{exact:10,prefix:9,substring:8,fuzzy:7,ngram:6,phonetic:5,compound:4,synonym:3}[t]||0}function vt(t,e,n="highlight"){if(!e||e.length===0)return G(t);let s="",r=0;for(const i of e){i.start>r&&(s+=G(t.slice(r,i.start)));const a=t.slice(i.start,i.end);s+=`<mark ${i.type==="exact"?'data-type="exact"':""} class="${n} ${n}--${i.type}">${G(a)}</mark>`,r=i.end}return r<t.length&&(s+=G(t.slice(r))),s}function G(t){const e=typeof document<"u"?document.createElement("div"):null;return e?(e.textContent=t,e.innerHTML):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}class Ne{cache;capacity;constructor(e=100){this.cache=new Map,this.capacity=e}get(e){if(!this.cache.has(e))return;const n=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,n),n}set(e,n){if(this.cache.has(e)&&this.cache.delete(e),this.cache.set(e,n),this.cache.size>this.capacity){const s=this.cache.keys().next().value;s!==void 0&&this.cache.delete(s)}}has(e){return this.cache.has(e)}clear(){this.cache.clear()}get size(){return this.cache.size}getStats(){return{size:this.cache.size,capacity:this.capacity,utilization:this.cache.size/this.capacity}}}class ne{cache;hits=0;misses=0;constructor(e=100){this.cache=new Ne(e)}getCacheKey(e,n,s){const r=s?JSON.stringify(s):"";return`${e}|${n||"default"}|${r}`}get(e,n,s){const r=this.getCacheKey(e,n,s),i=this.cache.get(r);return i?this.hits++:this.misses++,i}set(e,n,s,r){const i=this.getCacheKey(e,s,r);this.cache.set(i,n)}clear(){this.cache.clear(),this.hits=0,this.misses=0}getStats(){const e=this.cache.getStats(),n=this.hits+this.misses,s=n>0?this.hits/n:0;return{...e,hits:this.hits,misses:this.misses,hitRate:s}}}const Ae={à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ā:"a",ă:"a",ą:"a",À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ā:"A",Ă:"A",Ą:"A",è:"e",é:"e",ê:"e",ë:"e",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",È:"E",É:"E",Ê:"E",Ë:"E",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ì:"i",í:"i",î:"i",ï:"i",ĩ:"i",ī:"i",ĭ:"i",į:"i",Ì:"I",Í:"I",Î:"I",Ï:"I",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ō:"o",ŏ:"o",ő:"o",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ō:"O",Ŏ:"O",Ő:"O",ù:"u",ú:"u",û:"u",ü:"u",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ý:"y",ÿ:"y",ŷ:"y",Ý:"Y",Ÿ:"Y",Ŷ:"Y",ñ:"n",ń:"n",ņ:"n",ň:"n",Ñ:"N",Ń:"N",Ņ:"N",Ň:"N",ç:"c",ć:"c",ĉ:"c",ċ:"c",č:"c",Ç:"C",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ß:"ss",ð:"d",đ:"d",Ð:"D",Đ:"D",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĥ:"h",ħ:"h",Ĥ:"H",Ħ:"H",ĵ:"j",Ĵ:"J",ķ:"k",Ķ:"K",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ŕ:"r",ŗ:"r",ř:"r",Ŕ:"R",Ŗ:"R",Ř:"R",ś:"s",ŝ:"s",ş:"s",š:"s",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ţ:"t",ť:"t",ŧ:"t",Ţ:"T",Ť:"T",Ŧ:"T",ŵ:"w",Ŵ:"W",ź:"z",ż:"z",ž:"z",Ź:"Z",Ż:"Z",Ž:"Z",æ:"ae",œ:"oe",Æ:"AE",Œ:"OE",þ:"th",Þ:"TH"},W=new Map,xe=1e4;function j(t){if(!t)return t;const e=W.get(t);if(e!==void 0)return e;const n=[];for(let r=0;r<t.length;r++){const i=t[r];n.push(Ae[i]||i)}let s=n.join("");return s=s.normalize("NFD").replace(/[\u0300-\u036f]/g,""),W.size<xe?W.set(t,s):W.size===xe&&(W.clear(),W.set(t,s)),s}function Tt(t){if(!t)return!1;for(let e=0;e<t.length;e++)if(Ae[t[e]])return!0;return/[\u0300-\u036f]/.test(t.normalize("NFD"))}function Et(t){return j(t.toLowerCase())}function Lt(t){const e=j(t);return e!==t?[t,e]:[t]}function Fe(t,e){if(!e||e.length===0||typeof t=="string")return null;if(typeof t=="object"&&t!==null){const n={};for(const s of e){const r=t[s];r!=null&&(n[s]=String(r))}return Object.keys(n).length>0?n:null}return null}function Mt(t,e){const n={};for(const s of t)n[s]=e?.[s]??1;return n}const Oe={english:["a","an","and","are","as","at","be","by","for","from","has","he","in","is","it","its","of","on","that","the","to","was","will","with","the","this","but","they","have","had","what","when","where","who","which","why","how"],german:["der","die","das","den","dem","des","ein","eine","einer","eines","einem","einen","und","oder","aber","ist","sind","war","waren","hat","haben","wird","werden","von","zu","im","am","um","auf","für","mit","nach","bei","aus"],spanish:["el","la","los","las","un","una","unos","unas","de","del","y","o","pero","es","son","era","fueron","ha","han","en","a","al","con","por","para","sin","sobre","entre"],french:["le","la","les","un","une","des","du","de","et","ou","mais","est","sont","était","étaient","a","ont","à","au","aux","avec","pour","par","dans","sur","sous","entre"]};function We(t,e){const n=e instanceof Set?e:new Set(e.map(i=>i.toLowerCase())),r=t.split(/\s+/).filter(i=>!n.has(i.toLowerCase()));return r.length===0?t:r.join(" ")}function Ct(t){const e=new Set;for(const n of t){const s=Oe[n.toLowerCase()];s&&s.forEach(r=>e.add(r))}return e}function Pt(t,e){return(e instanceof Set?e:new Set(e.map(s=>s.toLowerCase()))).has(t.toLowerCase())}function De(t){if(!t||typeof t!="string")return{phrases:[],terms:[],original:t||"",hasPhrases:!1};const e=[];let n=t;const s=/"([^"]+)"/g;let r;for(;(r=s.exec(t))!==null;){const o=r[1].trim();o&&o.split(/\s+/).length<=10&&e.push(o)}n=n.replace(/"[^"]*"/g," ");const i=/'([^']+)'/g;for(;(r=i.exec(t))!==null;){const o=r[1].trim();o&&o.split(/\s+/).length<=10&&e.push(o)}n=n.replace(/'[^']*'/g," ");const a=n.split(/\s+/).map(o=>o.trim()).filter(o=>o.length>0);return{phrases:e,terms:a,original:t,hasPhrases:e.length>0}}function Nt(t){return t?/"[^"]*"/.test(t)||/'[^']*'/.test(t):!1}function At(t){return t.toLowerCase().trim().replace(/\s+/g," ")}function xt(t){return t.toLowerCase().trim().split(/\s+/).filter(e=>e.length>0)}const Ft={exactMatch:!1,maxEditDistance:1,proximityBonus:1.5,maxProximityDistance:3,useTranspositions:!1};function Ot(t,e,n={}){const s={...Ft,...n};if(!t||!e)return{matched:!1,score:0,matchType:"none"};const r=t.toLowerCase(),i=e.toLowerCase(),a=Wt(r,i);if(a.matched)return{...a,score:1,matchType:"exact"};if(s.exactMatch)return{matched:!1,score:0,matchType:"none"};const o=Dt(r,i,s.maxEditDistance,s.useTranspositions);if(o.matched)return{...o,matchType:"fuzzy"};const c=Rt(r,i,s.maxProximityDistance);return c.matched?{...c,matchType:"proximity"}:{matched:!1,score:0,matchType:"none"}}function Wt(t,e){const n=t.indexOf(e);return n!==-1?{matched:!0,score:1,matchType:"exact",startPos:n,endPos:n+e.length}:{matched:!1,score:0,matchType:"none"}}function Dt(t,e,n,s){const r=O(e,{lowercase:!0}),i=O(t,{lowercase:!0});for(let a=0;a<=i.length-r.length;a++){const o=i.slice(a,a+r.length);let c=0,l=!0;for(let h=0;h<r.length;h++){const u=s?H(r[h],o[h],n):N(r[h],o[h],n);if(u>n){l=!1;break}c+=u}if(l){const h=r.length*n;return{matched:!0,score:h>0?.7+.2*(1-c/h):.9,matchType:"fuzzy",matchedWords:o}}}return{matched:!1,score:0,matchType:"none"}}function Rt(t,e,n){const s=O(e,{lowercase:!0}),r=O(t,{lowercase:!0}),i=s.map(()=>[]);if(r.forEach((l,h)=>{s.forEach((u,f)=>{(l===u||l.includes(u)||u.includes(l))&&i[f].push(h)})}),i.some(l=>l.length===0))return{matched:!1,score:0,matchType:"none"};let a=1/0,o=[];function c(l,h){if(l===s.length){const u=[...h].sort((g,m)=>g-m),f=u[u.length-1]-u[0];f<a&&(a=f,o=[...h]);return}for(const u of i[l])c(l+1,[...h,u])}return c(0,[]),a<=n?{matched:!0,score:.5+.2*(1-a/n),matchType:"proximity",matchedWords:o.map(h=>r[h])}:{matched:!1,score:0,matchType:"none"}}function Re(t){if(!t||t.trim().length===0)return["english"];const e=new Set;return e.add("english"),/[äöüßÄÖÜ]/.test(t)&&e.add("german"),/[àâäæçéèêëïîôùûüÿœÀÂÄÆÇÉÈÊËÏÎÔÙÛÜŸŒ]/.test(t)&&e.add("french"),/[áéíóúñüÁÉÍÓÚÑÜ¿¡]/.test(t)&&e.add("spanish"),Array.from(e)}function It(t){if(!t||t.trim().length===0)return{languages:["english"],confidence:{english:1},primary:"english"};const e={english:.5},n=t.length,s=(t.match(/[äöüßÄÖÜ]/g)||[]).length;s>0&&(e.german=Math.min(1,.5+s/n*10));const r=(t.match(/[àâäæçéèêëïîôùûüÿœÀÂÄÆÇÉÈÊËÏÎÔÙÛÜŸŒ]/g)||[]).length;r>0&&(e.french=Math.min(1,.5+r/n*10));const i=(t.match(/[áéíóúñüÁÉÍÓÚÑÜ¿¡]/g)||[]).length;i>0&&(e.spanish=Math.min(1,.5+i/n*10));const a=Object.entries(e).filter(([c,l])=>l>=.5).map(([c])=>c),o=Object.entries(e).sort(([,c],[,l])=>l-c)[0][0];return{languages:a,confidence:e,primary:o}}function Ie(t,e=100){return t.slice(0,Math.min(e,t.length)).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.values(s).filter(r=>typeof r=="string").join(" "):"").join(" ")}function Bt(t){return["english","german","french","spanish","auto"].includes(t.toLowerCase())}function jt(t){const e=t.toLowerCase().trim();return{en:"english",de:"german",fr:"french",es:"spanish",eng:"english",deu:"german",fra:"french",esp:"spanish"}[e]||e}const p={TERM:"TERM",QUOTED:"QUOTED",AND:"AND",OR:"OR",NOT:"NOT",LPAREN:"LPAREN",RPAREN:"RPAREN",COLON:"COLON",EXACT:"EXACT",FUZZY:"FUZZY",PHONETIC:"PHONETIC",PREFIX:"PREFIX",REGEX:"REGEX",COMPOUND:"COMPOUND",LANG:"LANG",SCORE:"SCORE",SCORE_OP:"SCORE_OP",NUMBER:"NUMBER",EOF:"EOF"};class _t{input="";position=0;tokens=[];tokenize(e){for(this.input=e.trim(),this.position=0,this.tokens=[];this.position<this.input.length&&(this.skipWhitespace(),!(this.position>=this.input.length));){const n=this.input[this.position];if(n==="("){this.tokens.push({type:p.LPAREN,value:"(",position:this.position}),this.position++;continue}if(n===")"){this.tokens.push({type:p.RPAREN,value:")",position:this.position}),this.position++;continue}if(n===":"){this.tokens.push({type:p.COLON,value:":",position:this.position}),this.position++;continue}if(n==='"'||n==="'"){this.tokenizeQuotedString(n);continue}if(this.isDigit(n)){this.tokenizeNumber();continue}if(this.isAlpha(n)){this.tokenizeKeywordOrTerm();continue}if(n===">"||n==="<"){this.tokenizeScoreOperator();continue}this.position++}return this.tokens.push({type:p.EOF,value:"",position:this.position}),this.tokens}skipWhitespace(){for(;this.position<this.input.length&&/\s/.test(this.input[this.position]);)this.position++}isAlpha(e){return/[a-zA-ZäöüßÄÖÜàâäæçéèêëïîôùûüÿœÀÂÄÆÇÉÈÊËÏÎÔÙÛÜŸŒáéíóúñüÁÉÍÓÚÑÜ_]/.test(e)}isDigit(e){return/[0-9.]/.test(e)}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}tokenizeQuotedString(e){const n=this.position;this.position++;let s="";for(;this.position<this.input.length&&this.input[this.position]!==e;)s+=this.input[this.position],this.position++;if(this.position>=this.input.length)throw new Error(`Unclosed quote at position ${n}`);this.position++,this.tokens.push({type:p.QUOTED,value:s,position:n})}tokenizeNumber(){const e=this.position;let n="";for(;this.position<this.input.length&&this.isDigit(this.input[this.position]);)n+=this.input[this.position],this.position++;this.tokens.push({type:p.NUMBER,value:n,position:e})}tokenizeKeywordOrTerm(){const e=this.position;let n="";for(;this.position<this.input.length&&this.isAlphaNumeric(this.input[this.position]);)n+=this.input[this.position],this.position++;const s=n.toUpperCase();switch(s){case"AND":this.tokens.push({type:p.AND,value:s,position:e});break;case"OR":this.tokens.push({type:p.OR,value:s,position:e});break;case"NOT":this.tokens.push({type:p.NOT,value:s,position:e});break;case"EXACT":this.tokens.push({type:p.EXACT,value:s,position:e});break;case"FUZZY":this.tokens.push({type:p.FUZZY,value:s,position:e});break;case"PHONETIC":this.tokens.push({type:p.PHONETIC,value:s,position:e});break;case"PREFIX":this.tokens.push({type:p.PREFIX,value:s,position:e});break;case"REGEX":this.tokens.push({type:p.REGEX,value:s,position:e});break;case"COMPOUND":this.tokens.push({type:p.COMPOUND,value:s,position:e});break;case"LANG":this.tokens.push({type:p.LANG,value:s,position:e});break;case"SCORE":this.tokens.push({type:p.SCORE,value:s,position:e});break;default:this.tokens.push({type:p.TERM,value:n,position:e});break}}tokenizeScoreOperator(){const e=this.position;let n=this.input[this.position];this.position++,this.position<this.input.length&&this.input[this.position]==="="&&(n+="=",this.position++),this.tokens.push({type:p.SCORE_OP,value:n,position:e})}}class v extends Error{position;constructor(e,n){super(e),this.name="FQLSyntaxError",this.position=n}}class Ut{tokens=[];current=0;parse(e){if(this.tokens=e,this.current=0,this.tokens.length===0||this.tokens[0].type===p.EOF)throw new v("Empty query",0);const n=this.parseExpression();if(!this.isAtEnd())throw new v(`Unexpected token '${this.peek().value}' at position ${this.peek().position}`,this.peek().position);return n}parseExpression(){return this.parseOrExpression()}parseOrExpression(){let e=this.parseAndExpression();for(;this.match(p.OR);){const n=this.parseAndExpression();e={type:"or",left:e,right:n}}return e}parseAndExpression(){let e=this.parseNotExpression();for(;this.match(p.AND);){const n=this.parseNotExpression();e={type:"and",left:e,right:n}}return e}parseNotExpression(){return this.match(p.NOT)?{type:"not",child:this.parsePrimary()}:this.parsePrimary()}parsePrimary(){if(this.match(p.LPAREN)){const e=this.parseExpression();if(!this.match(p.RPAREN))throw new v(`Expected ')' at position ${this.peek().position}`,this.peek().position);return e}if(this.check(p.EXACT)||this.check(p.FUZZY)||this.check(p.PHONETIC)||this.check(p.PREFIX)||this.check(p.REGEX)||this.check(p.COMPOUND))return this.parseFilter();if(this.check(p.LANG))return this.parseLang();if(this.check(p.QUOTED)){const n={type:"phrase",value:this.advance().value};return this.check(p.SCORE)?this.parseScore(n):n}if(this.check(p.TERM)){const e=this.advance();if(this.match(p.COLON)){const s=this.parsePrimary();return{type:"field",field:e.value,child:s}}const n={type:"term",value:e.value};return this.check(p.SCORE)?this.parseScore(n):n}throw new v(`Unexpected token '${this.peek().value}' at position ${this.peek().position}`,this.peek().position)}parseFilter(){const e=this.advance(),n=e.value.toLowerCase();if(!this.match(p.COLON))throw new v(`Expected ':' after ${e.value} at position ${this.peek().position}`,this.peek().position);let s;if(this.check(p.QUOTED))s=this.advance().value;else if(this.check(p.TERM))s=this.advance().value;else throw new v(`Expected value after ${e.value}: at position ${this.peek().position}`,this.peek().position);const r={type:"filter",filterType:n,value:s};return this.check(p.SCORE)?this.parseScore(r):r}parseLang(){if(this.advance(),!this.match(p.COLON))throw new v(`Expected ':' after LANG at position ${this.peek().position}`,this.peek().position);if(!this.check(p.TERM))throw new v(`Expected language name after LANG: at position ${this.peek().position}`,this.peek().position);const e=this.advance().value,n=this.parsePrimary();return{type:"lang",language:e,child:n}}parseScore(e){if(this.advance(),!this.check(p.SCORE_OP))throw new v(`Expected score operator (>, <, >=, <=) at position ${this.peek().position}`,this.peek().position);const n=this.advance().value;if(!this.check(p.NUMBER))throw new v(`Expected number after ${n} at position ${this.peek().position}`,this.peek().position);const s=parseFloat(this.advance().value);if(isNaN(s)||s<0||s>1)throw new v("Score threshold must be between 0 and 1",this.previous().position);return{type:"score",operator:n,threshold:s,child:e}}match(...e){for(const n of e)if(this.check(n))return this.advance(),!0;return!1}check(e){return this.isAtEnd()?!1:this.peek().type===e}advance(){return this.isAtEnd()||this.current++,this.previous()}isAtEnd(){return this.peek().type===p.EOF}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}}function $t(t){return t.type==="term"}function Qt(t){return t.type==="phrase"}function Ht(t){return t.type==="and"}function Gt(t){return t.type==="or"}function Vt(t){return t.type==="not"}function Xt(t){return t.type==="filter"}function Zt(t){return t.type==="field"}function Kt(t){return t.type==="score"}function Jt(t){return t.type==="lang"}class Be extends Error{constructor(e){super(e),this.name="FQLTimeoutError"}}class Yt{index;options;startTime=0;timeout=5e3;constructor(e,n={}){this.index=e,this.options=n,this.timeout=n.fqlOptions?.timeout||5e3}execute(e){return this.startTime=Date.now(),this.executeNode(e)}checkTimeout(){if(Date.now()-this.startTime>this.timeout)throw new Be(`Query execution timeout after ${this.timeout}ms`)}executeNode(e){return this.checkTimeout(),Ht(e)?this.executeAnd(e):Gt(e)?this.executeOr(e):Vt(e)?this.executeNot(e):$t(e)?this.executeTerm(e.value):Qt(e)?this.executePhrase(e.value):Xt(e)?this.executeFilter(e):Zt(e)?this.executeField(e):Kt(e)?this.executeScore(e):Jt(e)?this.executeLang(e):[]}executeAnd(e){const n=this.executeNode(e.left),s=this.executeNode(e.right),r=new Set(s.map(a=>a.display));return n.filter(a=>r.has(a.display)).sort((a,o)=>o.score-a.score)}executeOr(e){const n=this.executeNode(e.left),s=this.executeNode(e.right),r=new Map;for(const i of n)r.set(i.display,i);for(const i of s){const a=r.get(i.display);(!a||i.score>a.score)&&r.set(i.display,i)}return Array.from(r.values()).sort((i,a)=>a.score-i.score)}executeNot(e){const n=this.executeNode(e.child),s=new Set(n.map(i=>i.display));return A(this.index,"",this.index.base.length,this.options).filter(i=>!s.has(i.display)).sort((i,a)=>a.score-i.score)}executeTerm(e){return A(this.index,e,this.index.base.length,this.options)}executePhrase(e){return A(this.index,`"${e}"`,this.index.base.length,this.options)}executeFilter(e){const{filterType:n,value:s}=e,r=A(this.index,s,this.index.base.length,this.options);switch(n){case"exact":return r.filter(i=>i._debug_matchType==="exact");case"fuzzy":return r.filter(i=>i._debug_matchType==="fuzzy");case"phonetic":return r.filter(i=>i._debug_matchType==="phonetic");case"prefix":return r.filter(i=>i._debug_matchType==="prefix");case"compound":return r.filter(i=>i._debug_matchType==="compound");case"regex":return this.executeRegex(s);default:return r}}executeRegex(e){if(!this.options.fqlOptions?.allowRegex)throw new Error("Regex not enabled. Set fqlOptions.allowRegex = true");try{const n=new RegExp(e),s=[];for(const r of this.index.base)n.test(r)&&s.push({display:r,baseWord:r,score:1,isSynonym:!1,language:"unknown",_debug_matchType:"regex"});return s}catch{throw new Error(`Invalid regex pattern: ${e}`)}}executeField(e){const n=this.executeNode(e.child);return this.index.fieldData?n.filter(s=>s.field===e.field):n}executeScore(e){const n=this.executeNode(e.child),{operator:s,threshold:r}=e;return n.filter(i=>{switch(s){case">":return i.score>r;case"<":return i.score<r;case">=":return i.score>=r;case"<=":return i.score<=r;default:return!0}})}executeLang(e){const n=this.executeNode(e.child),s=e.language.toLowerCase();return n.filter(r=>r.language?.toLowerCase()===s)}}function je(t){const e=t.trim();return e.startsWith("fql(")&&e.endsWith(")")}function qt(t){const e=t.trim();if(!je(e))throw new Error("Not a valid FQL query. Must be wrapped in fql(...)");return e.slice(4,-1).trim()}function es(t,e,n,s={}){try{const r=qt(e),a=new _t().tokenize(r),c=new Ut().parse(a),h=new Yt(t,s).execute(c),u=n||s.maxResults||10;return h.slice(0,u)}catch(r){throw r instanceof v||r instanceof Be?r:new Error(`FQL execution error: ${r.message}`)}}function re(t){const e=/[a-zA-Z]/.test(t),n=/[0-9]/.test(t);return e&&n}function ie(t){const e=[];let n=null,s="",r=0;for(let i=0;i<t.length;i++){const a=t[i];let o;/[a-zA-Z]/.test(a)?o="alpha":/[0-9]/.test(a)?o="numeric":o="other",n===null?(n=o,s=a,r=i):n===o?s+=a:(e.push({type:n,value:s,start:r,end:i}),n=o,s=a,r=i)}return n!==null&&s.length>0&&e.push({type:n,value:s,start:r,end:t.length}),e}function _e(t){return ie(t).filter(e=>e.type==="alpha")}function Ue(t){return ie(t).filter(e=>e.type==="numeric")}function _(t){return _e(t).map(e=>e.value).join("")}function U(t){return Ue(t).map(e=>e.value).join("")}function ts(t,e){const n=_(t),s=_(e),r=U(t),i=U(e),a=n.length>0||s.length>0,o=r.length>0||i.length>0;let c=0;if(a)if(n===s)c=1;else if(n.length===0||s.length===0)c=0;else{let h=0;const u=Math.min(n.length,s.length);for(let g=0;g<u&&n[g].toLowerCase()===s[g].toLowerCase();g++)h++;const f=Math.max(n.length,s.length);c=h/f}let l=0;if(o)if(r===i)l=1;else if(r.length===0||i.length===0)l=0;else{const h=r.length>i.length?r:i,u=r.length>i.length?i:r;if(h.includes(u))l=u.length/h.length;else{let f=0;const g=Math.min(r.length,i.length);for(let m=0;m<g;m++)r[m]===i[m]&&f++;l=f/Math.max(r.length,i.length)}}return{alphaSimilarity:c,numericSimilarity:l,hasAlpha:a,hasNumeric:o}}function oe(t,e){let n=t;return e.ranges&&e.ranges.length>0&&(n=n.filter(s=>s.fields?e.ranges.every(r=>{const i=s.fields[r.field];if(i===void 0)return!0;const a=Number(i);return isNaN(a)?!0:!(r.min!==void 0&&a<r.min||r.max!==void 0&&a>r.max)}):!0)),e.terms&&e.terms.length>0&&(n=n.filter(s=>s.fields?e.terms.every(r=>{const i=s.fields[r.field];return i===void 0?!0:(r.operator||"OR")==="OR"?r.values.some(o=>ae(i,o)):Array.isArray(i)?r.values.every(o=>i.some(c=>ae(c,o))):r.values.some(o=>ae(i,o))}):!0)),e.booleans&&e.booleans.length>0&&(n=n.filter(s=>s.fields?e.booleans.every(r=>{const i=s.fields[r.field];return i===void 0?!0:(typeof i=="boolean"?i:String(i)==="true"||Number(i)===1)===r.value}):!0)),n}function ae(t,e){if(t===e)return!0;if(typeof t=="string"&&typeof e=="string")return t.toLowerCase()===e.toLowerCase();const n=Number(t),s=Number(e);return!isNaN(n)&&!isNaN(s)?n===s:!1}function ce(t,e){const n=[...t];return n.sort((s,r)=>{const i=$e(s,r,e.primary);if(i!==0)return i;if(e.secondary){const a=$e(s,r,e.secondary);if(a!==0)return a}return e.keepRelevance!==!1?r.score-s.score:0}),n}function $e(t,e,n){const s=t.fields?.[n.field],r=e.fields?.[n.field];if(s===void 0&&r===void 0)return 0;if(s===void 0)return 1;if(r===void 0)return-1;const i=n.type||is(s);let a=0;switch(i){case"number":a=ss(s,r);break;case"date":a=ns(s,r);break;case"string":default:a=rs(s,r)}return n.order==="desc"?-a:a}function ss(t,e){const n=Number(t),s=Number(e);return isNaN(n)&&isNaN(s)?0:isNaN(n)?1:isNaN(s)?-1:n-s}function ns(t,e){const n=new Date(t),s=new Date(e),r=n.getTime(),i=s.getTime();return isNaN(r)&&isNaN(i)?0:isNaN(r)?1:isNaN(i)?-1:r-i}function rs(t,e){return String(t).localeCompare(String(e))}function is(t){if(typeof t=="number"||typeof t=="string"&&!isNaN(parseFloat(t))&&isFinite(Number(t)))return"number";if(t instanceof Date)return"date";if(typeof t=="string"){const e=new Date(t);if(!isNaN(e.getTime())&&/\d{4}-\d{2}-\d{2}|\d{2}\/\d{2}\/\d{4}/.test(t))return"date"}return"string"}class os{pool;stats;constructor(){this.pool=new Map,this.stats={totalStrings:0,uniqueStrings:0,memorySaved:0}}intern(e){this.stats.totalStrings++;const n=this.pool.get(e);return n!==void 0?(this.stats.memorySaved+=e.length*2,n):(this.pool.set(e,e),this.stats.uniqueStrings++,e)}internArray(e){return e.map(n=>this.intern(n))}internSet(e){const n=new Set;for(const s of e)n.add(this.intern(s));return n}getStats(){return{...this.stats,deduplicationRate:this.stats.totalStrings>0?((this.stats.totalStrings-this.stats.uniqueStrings)/this.stats.totalStrings*100).toFixed(2)+"%":"0%",memorySavedMB:(this.stats.memorySaved/1024/1024).toFixed(2)+" MB"}}clear(){this.pool.clear(),this.stats={totalStrings:0,uniqueStrings:0,memorySaved:0}}size(){return this.pool.size}}function Qe(t=[],e={}){const n=e.config?.languages,s=!n||n.includes("auto"),r=de(e.config);if(s){const m=Ie(t,100),y=Re(m);r.languages=y}Ye(r);const i=new Set(r.features),a=e.languageProcessors||J.getProcessors(r.languages);if(a.length===0)throw new Error(`No language processors found for: ${r.languages.join(", ")}`);const o=e.fields&&e.fields.length>0,c=t.length>0&&typeof t[0]=="object"&&t[0]!==null;if(c&&!o)throw new Error("When indexing objects, you must specify which fields to index via options.fields");const l=new os,h={base:[],variantToBase:new Map,phoneticToBase:new Map,ngramIndex:new Map,synonymMap:new Map,languageProcessors:new Map,config:r};o&&(h.fields=e.fields,h.fieldWeights=Mt(e.fields,e.fieldWeights),h.fieldData=new Map),a.forEach(m=>{h.languageProcessors.set(m.language,m)});const u=e.useInvertedIndex||r.useInvertedIndex||r.useBM25||r.useBloomFilter||t.length>=1e4,f=new Set;let g=0;if(!u){for(const m of t)if(m){if(o&&c){const y=Fe(m,e.fields);if(!y)continue;const b=Object.values(y)[0]||`item_${g}`;h.fieldData.set(b,y);for(const[w,S]of Object.entries(y)){if(!S||S.trim().length<r.minQueryLength)continue;const k=S.trim();f.has(b.toLowerCase())||(f.add(b.toLowerCase()),h.base.push(b));for(const z of a)Ge(k,b,w,z,h,r,i)}}else{const y=typeof m=="string"?m:String(m);if(y.trim().length<r.minQueryLength)continue;const b=y.trim();if(f.has(b.toLowerCase()))continue;f.add(b.toLowerCase()),h.base.push(l.intern(b));for(const w of a)He(b,w,h,r,i)}g++,e.onProgress&&e.onProgress(g,t.length)}}if(u){const{invertedIndex:m,documents:y}=se(t,a,r,i);h.invertedIndex=m,h.documents=y,h.base=y.map(b=>b.word)}if(r.enableCache!==!1){const m=r.cacheSize||100;h._cache=new ne(m)}return h}function He(t,e,n,s,r){const i=e.normalize(t);C(n.variantToBase,i.toLowerCase(),t);const a=j(t);if(a!==t){const o=e.normalize(a).toLowerCase();o!==i.toLowerCase()&&C(n.variantToBase,o,t)}if(r.has("partial-words")&&e.getWordVariants(t,s.performance).forEach(c=>{C(n.variantToBase,c.toLowerCase(),t)}),r.has("phonetic")&&e.supportedFeatures.includes("phonetic")){const o=e.getPhoneticCode(t);o&&C(n.phoneticToBase,o,t)}if(i.length>3){const c=s.performance==="fast"&&i.length>10?i.substring(0,15):i;Ve(c.toLowerCase(),s.ngramSize).forEach(h=>{C(n.ngramIndex,h,t)})}if(r.has("compound")&&e.supportedFeatures.includes("compound")&&e.splitCompoundWords(t).forEach(c=>{c!==t&&C(n.variantToBase,e.normalize(c).toLowerCase(),t)}),r.has("synonyms")&&(e.getSynonyms(i).forEach(c=>{C(n.synonymMap,c.toLowerCase(),t)}),s.customSynonyms)){const c=s.customSynonyms[i.toLowerCase()];c&&c.forEach(l=>{C(n.synonymMap,l.toLowerCase(),t)})}}function Ge(t,e,n,s,r,i,a){const o=s.normalize(t);M(r.variantToBase,o.toLowerCase(),e);const c=j(t);if(c!==t){const l=s.normalize(c).toLowerCase();l!==o.toLowerCase()&&M(r.variantToBase,l,e)}if(a.has("partial-words")&&s.getWordVariants(t,i.performance).forEach(h=>{M(r.variantToBase,h.toLowerCase(),e)}),a.has("phonetic")&&s.supportedFeatures.includes("phonetic")){const l=s.getPhoneticCode(t);l&&M(r.phoneticToBase,l,e)}if(o.length>3){const h=i.performance==="fast"&&o.length>15?o.substring(0,15):o;Ve(h.toLowerCase(),i.ngramSize).forEach(f=>{M(r.ngramIndex,f,e)})}if(a.has("compound")&&s.supportedFeatures.includes("compound")&&s.splitCompoundWords(t).forEach(h=>{h.length>=i.minQueryLength&&M(r.variantToBase,s.normalize(h).toLowerCase(),e)}),a.has("synonyms")&&(s.getSynonyms(o).forEach(h=>{M(r.synonymMap,h.toLowerCase(),e)}),i.customSynonyms)){const h=i.customSynonyms[o.toLowerCase()];h&&h.forEach(u=>{M(r.synonymMap,u.toLowerCase(),e)})}}function M(t,e,n,s){t.has(e)||t.set(e,new Set),t.get(e).add(n)}function C(t,e,n){t.has(e)||t.set(e,new Set),t.get(e).add(n)}function as(t,e,n,s={}){const r={},i=[...new Set(e)];for(const a of i)r[a]=A(t,a,n,s);return r}function A(t,e,n,s={}){const r=t.config,i=n||s.maxResults||r.maxResults,a=s.fuzzyThreshold||r.fuzzyThreshold;if(!e||e.trim().length<r.minQueryLength)return[];if(s.enableFQL&&je(e))return es(t,e,i,s);const o=De(e);if(o.hasPhrases)return us(t,o,i,a,s);let c=e;if(r.enableStopWords&&r.stopWords&&r.stopWords.length>0&&(c=We(e,r.stopWords)),!c||c.trim().length===0)return[];if(t._cache){const g=t._cache.get(c,i,s);if(g)return g}const h=(s.languages||r.languages).map(g=>t.languageProcessors.get(g)).filter(g=>g!==void 0);if(h.length===0)return[];if(t.invertedIndex&&t.documents){const g=hs(t,c,i,a,h,s);return t._cache&&t._cache.set(c,g,i,s),g}const u=new Map;for(const g of h){const m=g.normalize(c.trim());ze(m,t,u,g.language);const y=Array.from(u.values()).filter(w=>w.matchType==="exact");if(y.length>=i&&y.some(w=>w.word===m))break;Se(m,t,u,g.language),it(m,t,u,g.language),Array.from(u.values()).filter(w=>w.matchType==="exact"||w.matchType==="prefix"||w.matchType==="substring").length>=i*2?(q(m,g,t,u),ke(m,t,u),u.size<i*3&&(ee(m,t,u,g.language,r.ngramSize),(r.features.includes("missing-letters")||r.features.includes("extra-letters")||r.features.includes("transpositions"))&&te(m,t,u,g,r))):(q(m,g,t,u),ke(m,t,u),ee(m,t,u,g.language,r.ngramSize),(r.features.includes("missing-letters")||r.features.includes("extra-letters")||r.features.includes("transpositions"))&&te(m,t,u,g,r))}let f=Array.from(u.values()).map(g=>le(g,c,a,t,s)).filter(g=>g!==null);return s.debug&&(console.log(`
🔍 Debug: Query "${c}"`),console.log(`📊 Total matches found: ${u.size}`),console.log(`📊 After threshold filter: ${f.length}`),console.log(`
Top 10 matches before sorting:`),f.slice(0,10).forEach((g,m)=>{console.log(`  ${m+1}. ${g.display} (score: ${g.score.toFixed(2)}, type: ${g._debug_matchType})`)})),s.filters&&(f=oe(f,s.filters)),s.sort?f=ce(f,s.sort):f=f.sort((g,m)=>m.score-g.score),f=f.slice(0,i),t._cache&&t._cache.set(c,f,i,s),f}function le(t,e,n,s,r){let i=cs(t,e,s.config);if(t.bm25Score!==void 0&&s.config.useBM25){const o=s.config.bm25Weight||.6,c=1-o;i=o*t.bm25Score+c*i}if(t.fieldWeight&&(i=Math.min(1,i*t.fieldWeight)),i<n)return null;const a={display:t.word,baseWord:t.word,isSynonym:t.matchType==="synonym",score:i,language:t.language,_debug_matchType:t.matchType};return s.fieldData&&s.fieldData.has(t.word)&&(a.fields=s.fieldData.get(t.word),a.field=t.field),r?.includeHighlights&&(a.highlights=Ce(t,e,t.word)),a}function cs(t,e,n){const s={...L,...n?.matchTypeScores||{}},r={...Q,...n?.scoringModifiers||{}},i=e.length,a=t.word.length,o=Math.max(i,a);let c=r.baseScore;switch(t.matchType){case"exact":c=s.exact;break;case"prefix":c=s.prefix,r.prefixLengthPenalty&&(c-=(a-i)/(o*2));break;case"substring":c=s.substring;const l=t.normalized.toLowerCase().indexOf(e.toLowerCase());if(l!==-1){const h=l/t.normalized.length,u=.25*Math.pow(h,1.5);c-=u}break;case"phonetic":c=s.phonetic;break;case"fuzzy":t.editDistance!==void 0&&(n?.enableAlphanumericSegmentation&&re(e)&&re(t.word)?c=ls(e,t.word,n):c=Math.max(s.fuzzyMin,s.fuzzy-t.editDistance/o*.3));break;case"synonym":c=s.synonym;break;case"compound":c=s.compound;break;case"ngram":c=Y(e.toLowerCase(),t.normalized,3)*s.ngram;break}return a<=i+r.shortWordMaxDiff&&t.matchType!=="exact"&&(c+=r.shortWordBoost),t.matchType==="exact"?Math.min(1,Math.max(0,s.exact)):Math.min(1,Math.max(0,c))}function ls(t,e,n){const s=_(t).toLowerCase(),r=_(e).toLowerCase(),i=U(t),a=U(e),o=n.alphanumericAlphaWeight||.7,c=n.alphanumericNumericWeight||.3;let l=0,h=0;if(s.length>0&&r.length>0){const f=Math.max(s.length,r.length),g=N(s,r,n.maxEditDistance);l=Math.max(0,1-g/f)}else s.length===0&&r.length===0&&(l=1);if(i.length>0&&a.length>0)if(i===a)h=1;else if(a.includes(i)||i.includes(a)){const f=i.length<a.length?i:a,g=i.length<a.length?a:i;h=f.length/g.length}else{const f=Math.max(i.length,a.length),g=n.alphanumericNumericEditDistanceMultiplier||1.5,m=N(i,a,Math.ceil(n.maxEditDistance*g));h=Math.max(0,1-m/f)}else i.length===0&&a.length===0?h=1:h=.3;const u=l*o+h*c;return Math.max(.3,u)}function Ve(t,e){if(t.length<e)return[t];const n=[];for(let s=0;s<=t.length-e;s++)n.push(t.slice(s,s+e));return n}function hs(t,e,n,s,r,i){if(!t.invertedIndex||!t.documents)throw new Error("Inverted index not available");let a=ft(t.invertedIndex,t.documents,e,r,t.config);if(t.config.useBM25){const c=e.toLowerCase().split(/\s+/).filter(l=>l.length>0);a=wt(a,c,t.invertedIndex,t.documents,t.config)}let o=a.map(c=>le(c,e,s,t,i)).filter(c=>c!==null);return i?.filters&&(o=oe(o,i.filters)),i?.sort?o=ce(o,i.sort):o=o.sort((c,l)=>l.score-c.score),o=o.slice(0,n),o}function us(t,e,n,s,r){const i=t.config,o={exactMatch:!1,maxEditDistance:1,proximityBonus:1.5,maxProximityDistance:3,useTranspositions:i.features.includes("transpositions")},c=new Map;for(const f of e.phrases)for(const g of t.base){const m=Ot(g,f,o);if(m.matched){const y=c.get(g),b=m.score*o.proximityBonus;y?c.set(g,{score:Math.max(y.score,b),phraseCount:y.phraseCount+1}):c.set(g,{score:b,phraseCount:1})}}let l=new Map;if(e.terms.length>0){const f=e.terms.join(" "),g=i.languages.map(m=>t.languageProcessors.get(m)).filter(m=>m!==void 0);for(const m of g){const y=m.normalize(f);ze(y,t,l,m.language),Se(y,t,l,m.language),q(y,m,t,l),ee(y,t,l,m.language,i.ngramSize),(i.features.includes("missing-letters")||i.features.includes("extra-letters")||i.features.includes("transpositions"))&&te(y,t,l,m,i)}}const h=new Map;for(const[f,g]of c.entries()){const m={display:f,baseWord:f,isSynonym:!1,score:g.score};l.get(f)&&(m.score=Math.min(1,m.score*1.2)),h.set(f,m)}for(const[f,g]of l.entries())if(!h.has(f)){const m=le(g,e.terms.join(" "),s,t,r);m&&(m.score*=.8,h.set(f,m))}const u=Array.from(h.values()).filter(f=>f.score>=s).sort((f,g)=>g.score-f.score).slice(0,n);return t._cache&&t._cache.set(e.original,u,n,r),u}function fs(t,e=[],n={}){if(!t||!t.config)throw new Error("Invalid index provided");if(!e||e.length===0)return t;const s=t.config,r=new Set(s.features),i=Array.from(t.languageProcessors.values());if(i.length===0)throw new Error("No language processors found in index");const a=t.fields&&t.fields.length>0,o=e.length>0&&typeof e[0]=="object"&&e[0]!==null;if(o&&!a)throw new Error("Index was not built with fields, cannot add objects");const c=new Set(t.base.map(h=>h.toLowerCase()));let l=0;for(const h of e)if(h){if(a&&o){const u=Fe(h,t.fields);if(!u)continue;const f=Object.values(u)[0]||`item_${t.base.length+l}`;if(c.has(f.toLowerCase()))continue;t.fieldData&&t.fieldData.set(f,u),c.add(f.toLowerCase()),t.base.push(f);for(const[g,m]of Object.entries(u)){if(!m||m.trim().length<s.minQueryLength)continue;const y=m.trim();for(const b of i)Ge(y,f,g,b,t,s,r)}}else{const u=typeof h=="string"?h:String(h);if(u.trim().length<s.minQueryLength)continue;const f=u.trim();if(c.has(f.toLowerCase()))continue;c.add(f.toLowerCase()),t.base.push(f);for(const g of i)He(f,g,t,s,r)}l++,n.onProgress&&n.onProgress(l,e.length)}if(t.invertedIndex&&t.documents){const{invertedIndex:h,documents:u}=se(t.base,i,s,r);t.invertedIndex=h,t.documents=u}return t._cache&&t._cache.clear(),t}function gs(t,e=[]){if(!t||!t.config)throw new Error("Invalid index provided");if(!e||e.length===0)return t;const n=new Set(e.map(s=>s.toLowerCase()));t.base=t.base.filter(s=>!n.has(s.toLowerCase()));for(const[s,r]of t.variantToBase.entries()){const i=new Set(Array.from(r).filter(a=>!n.has(a.toLowerCase())));i.size===0?t.variantToBase.delete(s):t.variantToBase.set(s,i)}for(const[s,r]of t.phoneticToBase.entries()){const i=new Set(Array.from(r).filter(a=>!n.has(a.toLowerCase())));i.size===0?t.phoneticToBase.delete(s):t.phoneticToBase.set(s,i)}for(const[s,r]of t.ngramIndex.entries()){const i=new Set(Array.from(r).filter(a=>!n.has(a.toLowerCase())));i.size===0?t.ngramIndex.delete(s):t.ngramIndex.set(s,i)}for(const[s,r]of t.synonymMap.entries()){const i=new Set(Array.from(r).filter(a=>!n.has(a.toLowerCase())));i.size===0?t.synonymMap.delete(s):t.synonymMap.set(s,i)}if(t.fieldData)for(const s of e)t.fieldData.delete(s);if(t.invertedIndex&&t.documents){const s=t.config,r=new Set(s.features),i=Array.from(t.languageProcessors.values()),{invertedIndex:a,documents:o}=se(t.base,i,s,r);t.invertedIndex=a,t.documents=o}return t._cache&&t._cache.clear(),t}function he(t){const e={version:"1.0",base:t.base,variantToBase:Array.from(t.variantToBase.entries()).map(([n,s])=>[n,Array.from(s)]),phoneticToBase:Array.from(t.phoneticToBase.entries()).map(([n,s])=>[n,Array.from(s)]),ngramIndex:Array.from(t.ngramIndex.entries()).map(([n,s])=>[n,Array.from(s)]),synonymMap:Array.from(t.synonymMap.entries()).map(([n,s])=>[n,Array.from(s)]),config:t.config,languageProcessorNames:Array.from(t.languageProcessors.keys())};return t.invertedIndex&&(e.invertedIndex={termToPostings:Array.from(t.invertedIndex.termToPostings.entries()),phoneticToPostings:Array.from(t.invertedIndex.phoneticToPostings.entries()),ngramToPostings:Array.from(t.invertedIndex.ngramToPostings.entries()),synonymToPostings:Array.from(t.invertedIndex.synonymToPostings.entries()),totalDocs:t.invertedIndex.totalDocs,avgDocLength:t.invertedIndex.avgDocLength}),t.documents&&(e.documents=t.documents),JSON.stringify(e)}async function Xe(t){const e=JSON.parse(t),n=new Map(e.variantToBase.map(([l,h])=>[l,new Set(h)])),s=new Map(e.phoneticToBase.map(([l,h])=>[l,new Set(h)])),r=new Map(e.ngramIndex.map(([l,h])=>[l,new Set(h)])),i=new Map(e.synonymMap.map(([l,h])=>[l,new Set(h)])),{LanguageRegistry:a}=await Promise.resolve().then(()=>qe),o=new Map;for(const l of e.languageProcessorNames){const h=a.getProcessor(l);h&&o.set(l,h)}const c={base:e.base,variantToBase:n,phoneticToBase:s,ngramIndex:r,synonymMap:i,languageProcessors:o,config:e.config};if(e.invertedIndex&&(c.invertedIndex={termToPostings:new Map(e.invertedIndex.termToPostings),phoneticToPostings:new Map(e.invertedIndex.phoneticToPostings),ngramToPostings:new Map(e.invertedIndex.ngramToPostings),synonymToPostings:new Map(e.invertedIndex.synonymToPostings),totalDocs:e.invertedIndex.totalDocs,avgDocLength:e.invertedIndex.avgDocLength}),e.documents&&(c.documents=e.documents),e.config.enableCache!==!1){const l=e.config.cacheSize||100;c._cache=new ne(l)}return c}function ms(t,e="fuzzy-search-index"){if(typeof localStorage>"u")throw new Error("localStorage is not available");const n=he(t);localStorage.setItem(e,n)}async function ds(t="fuzzy-search-index"){if(typeof localStorage>"u")throw new Error("localStorage is not available");const e=localStorage.getItem(t);return e?await Xe(e):null}function ps(t){const e=he(t);return new Blob([e]).size}function Ze(t,e){if(e===0)return!0;const n=t[e-1];return/[\s\-_.,;:!?()[\]{}'"\/\\]/.test(n)}function Ke(t,e,n){const s=e+n,r=Ze(t,e),i=s>=t.length||/[\s\-_.,;:!?()[\]{}'"\/\\]/.test(t[s]);return r&&i}function Je(t,e,n=!1){const s=[],r=n?t:t.toLowerCase(),i=n?e:e.toLowerCase();let a=0;for(;a<r.length;){const o=r.indexOf(i,a);if(o===-1)break;Ke(t,o,i.length)&&s.push(o),a=o+1}return s}function ys(t,e,n){return n?Je(t,e,!1).length>0:t.toLowerCase().includes(e.toLowerCase())}function bs(t){const n=t.replace(/[.+?^${}()|[\]\\]/g,"\\$&").replace(/\*/g,".*");return new RegExp(`^${n}$`,"i")}function ws(t,e){return bs(e).test(t)}function ue(t,e={}){const{minLength:n=2,splitWords:s=!0,stopWords:r=!1,overlap:i=0,chunkSize:a=0,splitOn:o="word",format:c="string",removeNumbers:l=!1,caseSensitive:h=!1}=e;let u=t;switch(c){case"base64":try{u=atob(t)}catch(g){return console.error("Failed to decode base64:",g),[]}break;case"html":u=zs(t);break;case"json":u=Ss(t);break;case"url":throw new Error("URL format requires async. Use dataToIndexAsync() instead.")}a>0&&(u=ks(u,a,i,o).join(" "));let f=[];if(s?f=O(u,{keepEmpty:!1}):f=[u],f=f.map(g=>(g=g.replace(/^[^\p{L}\p{N}]+|[^\p{L}\p{N}]+$/gu,""),h||(g=g.toLowerCase()),g)).filter(g=>!(g.length<n||l&&/^\d+$/.test(g))),r&&Array.isArray(r)){const g=new Set(r.map(m=>m.toLowerCase()));f=f.filter(m=>!g.has(m.toLowerCase()))}return Array.from(new Set(f))}function zs(t){let e=t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi," ");return e=e.replace(/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi," "),e=e.replace(/<!--[\s\S]*?-->/g," "),e=e.replace(/<[^>]+>/g," "),e=e.replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&apos;/g,"'"),e=e.replace(/\s+/g," ").trim(),e}function Ss(t){try{let e=function(r,i=0){i>10||(typeof r=="string"?s.push(r):Array.isArray(r)?r.forEach(a=>e(a,i+1)):typeof r=="object"&&r!==null&&Object.values(r).forEach(a=>e(a,i+1)))};const n=JSON.parse(t),s=[];return e(n),s.join(" ")}catch(e){return console.error("Failed to parse JSON:",e),""}}function ks(t,e,n,s){const r=[];if(s==="paragraph"){const i=t.split(/\n\n+/);let a="";for(const o of i)(a+o).length<=e?a+=(a?`

`:"")+o:(a&&r.push(a),a=o);a&&r.push(a)}else if(s==="sentence"){const i=t.split(/[.!?]+\s+/);let a="";for(const o of i)(a+o).length<=e?a+=(a?" ":"")+o:(a&&r.push(a),a=o);a&&r.push(a)}else{const i=t.split(/\s+/);let a="";for(const o of i)(a+" "+o).length<=e?a+=(a?" ":"")+o:(a&&r.push(a),n>0&&a?a=a.split(/\s+/).slice(-Math.ceil(n/10)).join(" ")+" "+o:a=o);a&&r.push(a)}return r}async function vs(t,e={}){const{format:n="string"}=e;if(n==="url")try{const r=await(await fetch(t)).text();return ue(r,{...e,format:"html"})}catch(s){return console.error("Failed to fetch URL:",s),[]}return ue(t,e)}function Ts(t,e={}){const n=Qe(t,{config:{languages:e.languages||["english"],performance:e.performance||"balanced",maxResults:e.maxResults||5}});return{search:(s,r)=>A(n,s,r),index:n}}const Es="1.0.13";d.ArrayPool=pe,d.BaseLanguageProcessor=F,d.BloomFilter=B,d.DEFAULT_BM25_CONFIG=I,d.DEFAULT_CONFIG=fe,d.DEFAULT_MATCH_TYPE_SCORES=L,d.DEFAULT_SCORING_MODIFIERS=Q,d.DEFAULT_STOP_WORDS=Oe,d.EnglishProcessor=X,d.FrenchProcessor=K,d.GermanProcessor=V,d.LRUCache=Ne,d.LanguageRegistry=J,d.MapPool=ye,d.ObjectPool=et,d.PERFORMANCE_CONFIGS=ge,d.SearchCache=ne,d.SetPool=be,d.SpanishProcessor=Z,d.VERSION=Es,d.applyFilters=oe,d.applySorting=ce,d.areStringsSimilar=rt,d.batchSearch=as,d.buildCorpusStats=ct,d.buildFuzzyIndex=Qe,d.calculateBM25Score=Le,d.calculateDamerauLevenshteinDistance=H,d.calculateHighlights=Ce,d.calculateIDF=Ee,d.calculateLevenshteinDistance=N,d.calculateNgramSimilarity=Y,d.combineScores=lt,d.compareSegments=ts,d.createBloomFilter=ht,d.createFuzzySearch=Ts,d.dataToIndex=ue,d.dataToIndexAsync=vs,d.deserializeIndex=Xe,d.detectLanguages=Re,d.detectLanguagesWithConfidence=It,d.distanceToSimilarity=we,d.extractAlphaPart=_,d.extractNumericPart=U,d.filterStopWords=We,d.findWordBoundaryMatches=Je,d.formatHighlightedHTML=vt,d.getAccentVariants=Lt,d.getAlphaSegments=_e,d.getNumericSegments=Ue,d.getSerializedSize=ps,d.getStopWordsForLanguages=Ct,d.getSuggestions=A,d.globalArrayPool=P,d.globalMapPool=st,d.globalSetPool=nt,d.hasAccents=Tt,d.hasPhraseSyntax=Nt,d.isAlphanumeric=re,d.isStopWord=Pt,d.isValidLanguage=Bt,d.isWordBoundary=Ze,d.loadIndexFromLocalStorage=ds,d.matchesAtWordBoundary=Ke,d.matchesWildcard=ws,d.matchesWord=ys,d.mergeConfig=de,d.normalizeBM25Score=Me,d.normalizeForComparison=Et,d.normalizeLanguageCode=jt,d.normalizePhrase=At,d.parseQuery=De,d.removeAccents=j,d.removeFromIndex=gs,d.sampleTextForDetection=Ie,d.saveIndexToLocalStorage=ms,d.segmentString=ie,d.serializeIndex=he,d.splitPhraseWords=xt,d.updateIndex=fs,d.withPooledArray=tt,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=fuzzyfindjs.min.js.map
